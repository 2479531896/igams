(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.Tabs=function(c,b){b.beforeRender.call(this,c);try{this.initialize.call(this,c,b)}catch(d){b.errorRender.call(this,d)}b.afterRender.call(this,c)};a.bootui.widget.Tabs.prototype={constructor:a.bootui.widget.Tabs,initialize:function(d,k){var g=this;var j;function h(l){do{l+=~~(Math.random()*1000000)}while(document.getElementById(l));return l}var f=h(k.prefix);var c=a.isFunction(k.iframeHeight)?k.iframeHeight.call(this):k.iframeHeight;var i={container:function(){var l=[];l.push('<div class="nav-container">');l.push("<!-- Nav tabs -->");l.push('<ul class="nav nav-tabs" role="tablist">');l.push('<li role="presentation" class="active">');l.push('<a href="#home" aria-controls="home" role="tab" data-bs-toggle="tab">');l.push('<span class="fa fa-fw fa-home fa-sm" aria-hidden="true"></span>');l.push("\u4e3b\u9875");l.push("</a>");l.push("</li>");l.push("</ul>");l.push("<!-- Tab panes -->");l.push('<div class="tab-content">');l.push('<div role="tabpanel" class="tab-pane active" id="tab_home">');l.push("</div>");l.push("</div>");l.push("</div>");return l.join("")},tabtitle:function(m){var o="tab_"+m.id;var n=a("<li>",{role:"presentation",id:"tab_"+o}).append(a("<a>",{href:"#"+o,"aria-controls":o,role:"tab","data-bs-toggle":"tab","aria-url":m.url,"class":"button button--ujarak button--border-thin button--text-thick"}).append(a("<span>",{}).html(m.title)));if(k.closeable){var l="";l+='<div class="close-tab-content">';l+='<div style="position:relative;">';l+='<i class="close-tab glyphicon glyphicon-remove">';l+="</i>";l+="</div>";l+="</div>";n.find("a").append(l)}return n},tabpanel:function(m){var n="tab_"+m.id;var l=a("<div>",{"class":"tab-pane embed-responsive embed-responsive-16by9",id:n,role:"tabpanel"});if(m.content){l.append(m.content)}else{if(k.iframeUse&&!m.ajax){l.append('<iframe id="iframe_'+n+'" class="iframeClass embed-responsive-item" height="'+c+'" src="'+e(m,true)+'" style="height:'+c+'px" />')}else{a.get(m.url,function(o){l.append(o)})}}return l},tabdrop:function(){var l=[];l.push('<li class="dropdown pull-right tabdrop no-sort" id="tabs_dropdown">');l.push('<a href="javascript:void(0);" data-bs-toggle="dropdown" class="dropdown-toggle">');l.push('<i class="glyphicon glyphicon-align-justify"></i>');l.push('<b class="caret"></b>');l.push("</a>");l.push('<ul class="dropdown-menu"></ul>');l.push("</li>");return l.join("");var m=a("<li>",{"class":"dropdown pull-right hide tabdrop"}).append(a("<a>",{"class":"dropdown-toggle","data-bs-toggle":"dropdown",href:"javascript:void(0);"}).append(a("<i>",{"class":"glyphicon glyphicon-align-justify"})).append(a("<b>",{"class":"caret"}))).append(a("<ul>",{"class":"dropdown-menu"}))},changePageSize:function(m){var l=[];l.push('<div class="change-page-size">');l.push('<i class="glyphicon glyphicon glyphicon-resize-full"></i>');l.push("</div>");return l.join("")},shrinkPageSize:function(){var l=[];l.push('<div class="shrink-title">');l.push('<span class="title"></span>');l.push('<i class="glyphicon glyphicon-resize-small"></i>');l.push("</div>");return l.join("")}};a(k.monitor).off("click","[data-addtab]").on("click","[data-addtab]",function(){g.builTab({id:a(this).data("addtab"),title:a(this).attr("title")?a(this).attr("title"):a(this).html(),content:k.content?k.content:a(this).attr("content"),url:a(this).data("src"),ajax:a(this).attr("ajax")?true:false,tablayout:a(this).data("tab-layout"),funclayout:a(this).data("blank-layout"),data:a(this).data("request")||{}})});if(k.contextmenu){a(d).on("contextmenu","li[role=presentation]",function(){var l=a(this).children("a").attr("aria-controls");g.pop(l,a(this));return false});a(d).on("click","ul.rightMenu a[data-right=refresh]",function(){var m=a(this).parent("ul").attr("aria-controls").substring(4);var l=a(this).parent("ul").attr("aria-url");g.builTab({id:m,url:l,refresh:true});a("#popMenu").fadeOut()});a(d).on("click","ul.rightMenu a[data-right=remove]",function(){var l=a(this).parent("ul").attr("aria-controls");if(l.substring(0,4)!="tab_"){return}g.close(l);g.drop();a("#popMenu").fadeOut()});a(d).on("click","ul.rightMenu a[data-right=remove-circle]",function(){var l=a(this).parent("ul").attr("aria-controls");a(d).find("ul.nav").find("li").each(function(){var m=a(this).attr("id");if(m&&m!="tab_"+l){g.close(a(this).children("a").attr("aria-controls"))}});g.drop();a("#popMenu").fadeOut()});a(d).on("click","ul.rightMenu a[data-right=remove-left]",function(){var l=a(this).parent("ul").attr("aria-controls");a("#tab_"+l).prevUntil().each(function(){var m=a(this).attr("id");if(m&&m!="tab_"+l){g.close(a(this).children("a").attr("aria-controls"))}});g.drop();a("#popMenu").fadeOut()});a(d).on("click","ul.rightMenu a[data-right=remove-right]",function(){var l=a(this).parent("ul").attr("aria-controls");a("#tab_"+l).nextUntil().each(function(){var m=a(this).attr("id");if(m&&m!="tab_"+l){g.close(a(this).children("a").attr("aria-controls"))}});g.drop();a("#popMenu").fadeOut()})}a(d).off("click",".close-tab-content").on("click",".close-tab-content",function(){var l=a(this).parent("a").attr("aria-controls");g.close(l);a("body").prop("scrollTop","0")}).off("mouseover","li:not("+k.selector+" li.dropdown)").on("mouseover","li:not("+k.selector+" li.dropdown)",function(){a(this).find(".close-tab").show()}).off("mouseleave","li").on("mouseleave","li",function(){a(this).find(".close-tab").hide()}).off("click",".tabdrop li").on("click",".tabdrop li",function(){var l=a(".tabdrop").prev();a(".tabdrop").find(".dropdown-menu").append(l);a("#tab_tab_home").after(a(this))});a(document).off("click",".change-page-size").on("click",".change-page-size",function(){a("body").addClass("full-page");var m=a('li[role="presentation"].active').text();var l=a((i.shrinkPageSize()));l.find(".title").text(m);a("body").find(".gm-global-bg").prepend(l);a(document).unbind("keydown","esc").bind("keydown","esc",function(n){a("body").removeClass("full-page");a(".shrink-title").remove();return false})}).off("click",".shrink-title i").on("click",".shrink-title i",function(){a("body").removeClass("full-page");a(".shrink-title").remove()}).off("click","#tab_tab_home").on("click","#tab_tab_home",function(){a(".tab-pane").removeClass("active");a("#tab_home").addClass("active")});a(window).resize(function(){var m=a(window).height()-a(".gm-nav.top-nav").height()-40;c=m;var n=document.getElementsByTagName("iframe");for(var l=0;l<n.length;l++){a("#"+n[l].id).height(c);a("#"+n[l].id).css({"min-height":"300px"})}g.drop()});var b=a(d).find("div.nav-container");if(b.size()==0){b=a(i.container());a(d).empty().append(b)}a(b).attr("id",f);function e(o,l){var n=o.url;var m=[];a.each(a.extend(o.data||{},{layout:(l?o.tablayout:(o.funclayout||"func-layout"))}),function(p,q){if(a.isArray(q)){a.each(q,function(r,s){m.push(p+"="+q)})}else{if(a.isFunction(q)){m.push(p+"="+q.call(this))}else{m.push(p+"="+q)}}});m.push("_t="+jQuery.now());m.push("skin="+j);return n.indexOf("?")>-1?(n+"&"+m.join("&")):(n+"?"+m.join("&"))}a.extend(true,g,{destroy:function(){a(d).off("."+k.prefix).removeData("bootui.tabs");a("#"+f).remove()},builTab:function(l){var n="tab_"+l.id;var m=l.url;a('li[role="presentation"].active').removeClass("active");a('div[role="tabpanel"].active').removeClass("active");if(!a("#"+n).length){j=a(".gm-global-bg").attr("data-skin");var t=a(i.tabtitle(l));if(t.find(".fa-angle-right,img,.menu-icon-bg")){t.find(".fa-angle-right,img,.menu-icon-bg").remove()}t.data("opts",l);t.dblclick(function(){var v=a(this).data("opts");window.open(e(v,false))});var q=t.find("a").attr("aria-controls");var u=q.slice(4);r();t.click(function(){r()});function r(){a(".gm-left-nav-panel").find("a").each(function(){var v=a(this).attr("data-addtab");if(v==u){a(".current-root-mark").removeClass("current-root-mark");a(".current-mark").removeClass("current-mark");a(this).closest(".left-nav-root").find(">a").addClass("current-root-mark");a(this).addClass("current-mark");a(".current-mark").closest("ul").parent("li").addClass("active")}})}var s=a((i.changePageSize(l)));if(a("body").find(".change-page-size").size()==0){a(".tabs-below").append(s)}var p=a(i.tabpanel(l));a(d).find(".nav-tabs").find("#tab_tab_home").after(t);a("body").find(".tab-content").prepend(p);a(".nav-tabs").show();var o=a(".nav-tabs>li").size();a(".nav-tabs>li>a>i").removeClass("hide");a("#tab_"+n).addClass("active");a("#"+n).addClass("active");g.drop()}else{if(!l.refresh){a("#tab_"+n).addClass("active");a("#"+n).addClass("active");return}else{var p=a("#"+n);p.html("")}}if(k.sortable&&a.fn.sortable){a('ul[role="tablist"]').sortable({axis:"x",cancel:".no-sort",distance:20,items:"> li:not('#tab_tab_home,#tabs_dropdown')"});a('ul[role="tablist"]').disableSelection()}a(".gm-home-page").hide();a("#tab-general").show()},pop:function(n,m){a("body").find("#popMenu").remove();var l=a("<ul>",{"aria-controls":n,"class":"rightMenu list-group",id:"popMenu","aria-url":m.find(">a").attr("aria-url"),}).append('<a href="javascript:void(0);" class="list-group-item" data-right="refresh"><i class="glyphicon glyphicon-refresh"></i> \u5237\u65b0\u6b64\u6807\u7b7e</a><a href="javascript:void(0);" class="list-group-item" data-right="remove"><i class="glyphicon glyphicon-remove"></i> \u5173\u95ed\u6b64\u6807\u7b7e</a><a href="javascript:void(0);" class="list-group-item" data-right="remove-circle"><i class="glyphicon glyphicon-remove-circle"></i> \u5173\u95ed\u5176\u4ed6\u6807\u7b7e</a><a href="javascript:void(0);" class="list-group-item" data-right="remove-left"><i class="glyphicon glyphicon-chevron-left"></i> \u5173\u95ed\u5de6\u4fa7\u6807\u7b7e</a><a href="javascript:void(0);" class="list-group-item" data-right="remove-right"><i class="glyphicon glyphicon-chevron-right"></i> \u5173\u95ed\u53f3\u4fa7\u6807\u7b7e</a>');l.css({top:m[0].offsetHeight+22+"px",left:m[0].offsetLeft+40+"px"});l.appendTo(a(d)).fadeIn("slow");l.mouseleave(function(){})},close:function(o){if(a(d).find("li.active").attr("id")=="tab_"+o){a("#tab_"+o).prev().addClass("active");a("#"+o).prev().addClass("active")}if(a("#tab_tab_home").hasClass("active")){a("#tab_home").addClass("active")}var m=document.getElementById("iframe_"+o);if(m){var l=m.contentWindow;m.src="about:blank";try{l.document.write("");l.document.clear()}catch(n){}try{document.body.removeChild(m)}catch(n){}}a("#tab_"+o).remove();a("#"+o).remove();g.drop();k.callback()},closeAll:function(){a.each(a(d).find("li[id]"),function(){var m=a(this).children("a").attr("aria-controls");a("#tab_"+m).remove();a("#"+m).remove()});a(d).find('li[role = "presentation"]').first().addClass("active");var l=a(d).find('li[role = "presentation"]').first().children("a").attr("aria-controls");a("#"+l).addClass("active");g.drop()},drop:function(){var l=a(d).find(".nav-tabs");var n=a(i.tabdrop());if(l.find(".tabdrop").size()==0){n.appendTo(l)}else{n=l.find(".tabdrop")}var m=0;l.append(n.find("li")).find(">li").not(".tabdrop").each(function(){if(this.offsetTop>0||l.width()-a(this).position().left-a(this).width()<200&&l.find(">li").size()>2){n.find("ul").prepend(a(this));m++}});if(m>0){n.removeClass("hide");if(n.find(".active").length==1){n.addClass("active")}else{n.removeClass("active")}}else{n.addClass("hide")}a("#tabs_dropdown").outerClick(function(){a(this).removeClass("open")})}})},setDefaults:function(b){a.extend(a.fn.tabs.defaults,b)},getDefaults:function(b){return a.fn.tabs.defaults}};a.fn.tabs=function(d){var c=a.grep(arguments||[],function(f,e){return e>=1});var b=a(this).selector||options.selector;return this.each(function(){var g=a(this);var f=g.data("bootui.tabs");if(!f&&d=="destroy"){return}if(!f){var e=a.extend(true,{selector:b},a.fn.tabs.defaults,g.data(),((typeof d=="object"&&d)?d:{}));g.data("bootui.tabs",(f=new a.bootui.widget.Tabs(this,e)))}if(typeof d=="string"){f[d].apply(f,[].concat(c||[]))}})};a.fn.tabs.defaults={version:"1.0.0",prefix:"tabs",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,content:"",closeable:true,sortable:true,monitor:"body",obj:a(this),iframeUse:true,contextmenu:true,iframeHeight:function(){return a(window).height()-91},method:"init",callback:a.noop,clickEventType:((document.ontouchstart!==null)?"click":"touchstart")};a.fn.tabs.Constructor=a.bootui.widget.Tabs}(jQuery));

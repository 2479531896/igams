(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.FixedPanel=function(c,b){b.beforeRender.call(this,c);try{this.initialize.call(this,c,b)}catch(d){b.errorRender.call(this,d)}b.afterRender.call(this,c)};a.bootui.widget.FixedPanel.prototype={constructor:a.bootui.widget.FixedPanel,initialize:function(g,n){if(n.container&&a(n.container).size()==0){throw new Error("Container is not a valid element!")}var h=this;function i(o){do{o+=~~(Math.random()*1000000)}while(document.getElementById(o));return o}this.fixedpanel_uid=i(n.prefix);this.$element=a(g);this.options=n;var l=a(g).closest("div.bootbox");var c=n.container?a(n.container):(a(l).size()>0?a(l).find("div.modal-body"):window);var j=a(l).size()>0?a(l).find("div.modal-body"):document.body;var k=a(l).size()>0?(parseInt(l.css("z-index")||"1050")+90):1010;var e=g;var f=(n.placement||"right").toLocaleLowerCase();if(a.trim(n.content).length>0){e=a(n.template);a(e).attr("id",this.fixedpanel_uid);if(a.trim(n.title).lenght>0){a(e).find(".panel-heading").prepend('<h4 class="fixedpanel-title">'+(a.isFunction(n.title)?n.title.call(this):n.title.toString())+"</h4>")}else{a(e).find(".panel-heading").remove()}a(e).append((a.isFunction(n.content)?n.content.call(this):n.content.toString()));switch(f){case"left":case"top":a(j).prepend(e);break;case"right":case"bottom":a(j).append(e);break}}else{a(e).addClass("panel fixedpanel")}var b=n.rollback||{};if(b&&b.enable){var d=a(e).find(".list-group");var m=a(e).find(".table");if(d.size()>0){a(d).append('<li class="list-group-item btn_rollback">'+b.text+"</li>")}else{if(m.size()>0){a(m).find("tbody").append('<tr class="tr-item"><td class="tr-td-item btn_rollback">'+b.text+"</td></tr>")}}switch(f){case"left":case"right":a(e).find(".btn_rollback").click(function(){a("html,body").animate({scrollTop:b.point},b.speed,b.callback||a.noop)});break;case"top":case"bottom":a(e).find(".btn_rollback").click(function(){a("html,body").animate({scrollLeft:b.point},b.speed,b.callback||a.noop)})}}a(e).fixed({placement:f,container:c,width:n.width||"",height:n.height||"",margin:n.margin||"",showPoint:n.showPoint!=0?(n.showPoint||100):0,z_index:k,resizeDelay:n.resizeDelay,scrollDelay:n.scrollDelay,animateDelay:n.animateDelay,position:n.position||{},onScroll:n.onScroll||a.noop,onResize:n.onResize||a.noop});switch(f){case"left":case"right":a(e).find(".list-group,.table").width(n.width||"auto");break;case"top":case"bottom":a(e).find(".list-group,.table").height(n.height||"auto")}this.fixedpanel=e},destroy:function(){this.$element.off(".fixedpanel.widget.data-api").removeData("fixedpanel");a(this.fixedpanel).fixed("destroy");a("#"+this.fixedpanel_uid).remove()},setDefaults:function(b){a.extend(a.fn.fixedpanel.defaults,b)}};a.fn.fixedpanel=function(c){var b=a.grep(arguments||[],function(e,d){return d>=1});return this.each(function(){var f=a(this),e=f.data("fixedpanel");if(!e&&c=="destroy"){return}if(!e){var d=a.extend(true,{},a.fn.fixedpanel.defaults,f.data(),((typeof c=="object"&&c)?c:{}));f.data("fixedpanel",(e=new a.bootui.widget.FixedPanel(this,d)))}if(typeof c=="string"){e[c].apply(e,[].concat(b||[]))}})};a.fn.fixedpanel.defaults={version:"1.0.0",prefix:"fixedpanel",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,onScroll:a.noop,onResize:a.noop,container:null,title:"",placement:"right",width:"auto",height:"auto",margin:"2",showPoint:100,z_index:"1058",resizeDelay:100,scrollDelay:200,animateDelay:200,rollback:{enable:false,text:"\u56de\u5230\u9876\u90e8",point:0,speed:300,callback:a.noop},position:{},content:"",template:'<div class="panel panel-default fixedpanel"><div class="panel-heading"></div></div>'};a.fn.fixedpanel.Constructor=a.bootui.widget.FixedPanel}(jQuery));

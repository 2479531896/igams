(function(a){a.bootui=a.bootui||{};a.bootui.widget=a.bootui.widget||{};a.bootui.widget.FixedBox=function(c,b){b.beforeRender.call(this,c);this.initialize.call(this,c,b);b.afterRender.call(this,c)};a.bootui.widget.FixedBox.prototype={constructor:a.bootui.widget.FixedBox,initialize:function(f,h){if(h.container&&a(h.container).size()==0){throw new Error("Container is not a valid element!")}var j=this;function r(w){do{w+=~~(Math.random()*1000000)}while(document.getElementById(w));return w}this.fixedbox_uid=r(h.prefix);this.$element=a(f);this.options=h;if(a("#"+this.fixedbox_uid).size()==0){var v=a(f).closest("div.bootbox");var p=h.container?a(h.container):(a(v).size()>0?a(v).find("div.modal-body"):window);var n=a(v).size()>0?a(v).find("div.modal-body"):document.body;var c=a(v).size()>0?(parseInt(v.css("z-index")||"1050")+90):1010;var o=(h.placement||"right").toLowerCase();var q=a(h.template);a(q).attr("id",this.fixedbox_uid).addClass("fixedbox-"+o);var b=a(q).find(".fixedbox-outer");a(b).addClass("fixedbox-outer-"+o);a(b).find(".glyphicon").addClass("glyphicon-chevron-"+o);var s='<div class="fixedbox-content"><div class="fixedbox-content-body"></div></div>';switch(o){case"left":case"top":a(b).before(s);break;case"right":case"bottom":a(b).after(s);break}var l=a(q).find(".fixedbox-content");a(l).addClass("fixedbox-content-"+o);var i=a(b).find(".fixedbox-outer-disc");a(i).append("<h5>"+(a.isFunction(h.title)?h.title.call(this):h.title.toString())+"</h5>");a(i).append((a.isFunction(h.disc)?h.disc.call(this):h.disc.toString()));if(h.innerTitle){a(l).prepend('<h4 class="fixedbox-content-title">'+(a.isFunction(h.title)?h.title.call(this):h.title.toString())+"</h4>")}var t=a(l).find(".fixedbox-content-body");if(a.trim(h.content).length>0){a(t).append((a.isFunction(h.content)?h.content.call(this):h.content.toString()))}else{if(a.trim(h.href).length>0){a(t).load(h.href,a.extend(true,{},h.data||{}))}}switch(o){case"left":case"top":a(n).prepend(q);break;case"right":case"bottom":a(n).append(q);break}var g=true;switch(o){case"left":g=true;var u=parseInt(h.width||"100")-60;u=u<0?0:u;a(l).css({width:u+"px"});case"right":g=true;var u=parseInt(h.width||"100")-60;u=u<0?0:u;a(l).css({width:u+"px"});a(q).css("left","auto");break;case"top":case"bottom":g=false;var d=parseInt(h.height||"100")-60;d=d<0?0:d;a(l).css({height:d+"px"});break}var e=h.trigger||"click";var m=a(q).find(".fixedbox-outer .glyphicon");a(b).off(e).on((e),function(w){if(g){a(m).removeClass("glyphicon-chevron-left glyphicon-chevron-right");if(a(q).css("width")=="40px"){a(q).animate({width:h.width||"100px"},600);a(m).addClass("glyphicon-chevron-"+["left","right"]["left"==o?1:0])}else{a(q).animate({width:"40px"},600);a(m).addClass("glyphicon-chevron-"+["left","right"]["left"==o?0:1])}}else{a(m).removeClass("glyphicon-chevron-top glyphicon-chevron-bottom");if(a(q).css("height")=="40px"){a(q).animate({height:h.height||"100px"},600);a(m).addClass("glyphicon-chevron-"+["top","bottom"]["top"==o?1:0])}else{a(q).animate({height:"40px"},600);a(m).addClass("glyphicon-chevron-"+["top","bottom"]["top"==o?0:1])}}});a(document).click(function(y){var w=a(q),z=a(q)[0],x=y.target;if(z!==x&&!a.contains(z,x)){a(m).removeClass("glyphicon-chevron-"+o);if(g){a(m).addClass("glyphicon-chevron-"+["left","right"]["left"==o?1:0]);a(q).animate({width:"40px"},600)}else{a(m).addClass("glyphicon-chevron-"+["top","bottom"]["top"==o?1:0]);a(q).animate({height:"40px"},600)}}});if(a.fn.mCustomScrollbar){a(t).mCustomScrollbar({autoHideScrollbar:false,horizontalScroll:(g?false:true),advanced:{updateOnBrowserResize:true,updateOnContentResize:true,autoExpandHorizontalScroll:true},theme:"dark-3"})}function k(){if(g){a(t).css({height:a(q).innerHeight()-a(l).find(".fixedbox-content-title").outerHeight()-20})}else{a(t).css({width:a(q).innerWidth()-a(l).find(".fixedbox-content-title").outerWidth()-20})}if(a.fn.mCustomScrollbar){a(t).mCustomScrollbar("update")}}a(q).fixed({placement:o,container:p,width:g?"40px":"100%",height:g?"100%":"40px",margin:"0",showPoint:"0",z_index:c,resizeDelay:100,scrollDelay:200,animateDelay:200,position:g?{top:0,bottom:0}:{left:0,right:0},onScroll:function(w){},onResize:function(w){k()}});this.fixedbox=q}},destroy:function(){this.$element.off(".fixedbox").removeData("bootui.fixedbox");if(a("#"+this.fixedbox_uid).size()>0){a(this.fixedbox).fixed("destroy");a("#"+this.fixedbox_uid).remove()}},setDefaults:function(b){a.extend(a.fn.fixedbox.defaults,b)}};a.fn.fixedbox=function(c){var b=a.grep(arguments||[],function(e,d){return d>=1});return this.each(function(){var f=a(this),e=f.data("bootui.fixedbox");if(!e&&c=="destroy"){return}if(!e){var d=a.extend({},a.fn.fixedbox.defaults,f.data(),((typeof c=="object"&&c)?c:{}));f.data("bootui.fixedbox",(e=new a.bootui.widget.FixedBox(this,d)))}if(typeof c=="string"){e[c].apply(e,[].concat(b||[]))}})};a.fn.fixedbox.defaults={version:"1.0.0",prefix:"fixedbox",beforeRender:a.noop,errorRender:a.noop,afterRender:a.noop,onScroll:a.noop,onResize:a.noop,container:null,innerTitle:false,width:"100px",height:"100px",trigger:"click",placement:"right",title:"",disc:"",content:"",href:null,data:{},template:'<div class="fixedbox"><div class="fixedbox-outer"><a href="javascript:void(0);" class="glyphicon"></a><a href="javascript:void(0);" class="fixedbox-outer-disc"></a></div></div>'};a.fn.fixedbox.Constructor=a.bootui.widget.FixedBox}(jQuery));


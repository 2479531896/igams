(function(d){function a(e){var g=0;for(var f=0;f<4;f++){if(e&1){g++}e>>>=1}return g}function c(e){if(e>=48&&e<=57){return 1}if(e>=65&&e<=90){return 2}if(e>=97&&e<=122){return 4}else{return 8}}function b(f){if(f.length<6){return 0}var e=0;for(i=0;i<f.length;i++){e|=c(f.charCodeAt(i))}return a(e)}d.bootui=d.bootui||{};d.bootui.widget=d.bootui.widget||{};d.bootui.widget.Strength=function(f,e){this.initialize.call(this,f,e)};d.bootui.widget.Strength.prototype={options:{version:"1.0.0",target:"",strongKey:"",afterRender:d.noop},initialize:function(g,e){var f=this;d.extend(true,f.options,e||{},{});d.extend(true,f,{getContainer:function(){var h=this,j=new Array();j.push('<table cellSpacing="0" cellPadding="0" border="0" class="resetCss" style="float: left;">');j.push("<tbody><tr>");j.push('<td style="padding: 3px 0;">'+d.i18n.matridx.utils["strength"]["label"]+"\uff1a</td>");j.push('<td style="color: #808080; font-weight: bold"><font id="passwdRating"></font></td>');j.push('</tr><tr><td colSpan="2">');j.push('<table id="passwdBar" cellSpacing="0" cellPadding="0" width="160" bgColor="#ffffff" border="0">');j.push('<tbody><tr><td id="posBar" width=0% bgColor="#e0e0e0" height="4"></td>');j.push('<td id="negBar" width="100%;" bgColor="#e0e0e0" height="4"></td></tr></tbody></table>');j.push("</td></tr></tbody></table>");return j.join("")},gff:function(l,k){var j=l.indexOf(k);if(j!=-1){var h=parseFloat(l.substring(j+k.length));if(!isNaN(h)){return h}}return null},compatible:function(){var n=navigator.userAgent.toLowerCase();var l=(n.indexOf("opera")!=-1);var j=(n.indexOf("msie")!=-1)&&document.all&&!l;var m=(n.indexOf("mac")!=-1);var k=(n.indexOf("gecko")!=-1);var o=(n.indexOf("safari")!=-1);if(j&&!l&&!m){var h=f.gff(n,"msie ");if(h!=null){return(h>=6)}}if(k&&!o){var h=f.gff(n,"rv:");if(h!=null){return(h>=1.4)}else{h=f.gff(n,"galeon/");if(h!=null){return(h>=1.3)}}}if(o){var h=f.gff(n,"applewebkit/");if(h!=null){return(h>=124)}}return false}});this.buildComponents.call(this,g);this.renderComponents.call(this,g);this.options.afterRender.call(this)},buildComponents:function(f){var e=this;d(f).each(function(h,g){if(d.trim(e.options.target).length>0){d(e.options.target).append(e.getContainer.call(e))}else{d(g).after(e.getContainer.call(e))}})},renderComponents:function(j){var f=this;var h=f.compatible();var e=d.i18n.matridx.utils["strength"]["ratings"];var g=["#aa0033","#aa0033","#6699cc","#093","#093","#676767"];var k=["#aa0033","#aa0033","#6699cc","#093","#093","#676767"];function l(n){var p=d("#posBar");var o=d("#negBar");var m=d("#passwdBar").outerWidth();if(n>=0&&n<=4){if(n==0){p.width(m/4+"px");o.width(m/4*(3-n)+"px")}else{p.width(m/4*n+"px");o.width(m/4*(4-n)+"px")}}else{p.width("0px");o.width(m+"px");n=5}p.css("background",k[n]);d("#passwdRating").html("<font color='"+g[n]+"'>"+e[n]+"</font>");d("#strongKey").val(n)}d(j).each(function(n,m){var p=0;var o=6;d(m).keyup(function(u){if(!h){return}if(!d(this).val()){return false}if(d(this).val().length<o){if(d(this).val().length>0){l.call(m,0)}else{var t=getElement("posBar");var s=getElement("negBar");var r=getElement("passwdRating");var q=getElement("passwdBar").width;t.style.width="0px";s.style.width=q+"px";r.innerHTML=""}}else{rating=b(d(this).val());p=rating;l.call(m,rating)}})})}};d.fn.extend({strength:function(f){var e=d.trim(f.strongKey||"yhmmdj");d(this).after('<input type="hidden" name="'+e+'" id="strongKey" />');return new d.bootui.widget.Strength(this,f)},pwdStrong:function(){var e=d.trim(d(this).val());return(e&&e.length>0)?b(e):"1"}})})(jQuery);

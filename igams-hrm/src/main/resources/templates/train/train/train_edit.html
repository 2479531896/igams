<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <script type="text/javascript" src="/js/systemmain/task/bootstrap-tagsinput.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/js/systemmain/task/bootstrap-tagsinput.css" />
    <script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/fileinput.min.css" />
</head>
<body>
<form id="editTrainForm" th:action ="${urlPrefix}+'/train/train/'+${formAction}" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation" style="font-size:12px">
    <div class="body-content">
        <div class="row">
            <input type="hidden" name="access_token"/>
            <input type="hidden" name="urlPrefix" id ="urlPrefix" th:value="${urlPrefix}">
            <input type="hidden" name="tpywlx" id="tpywlx" th:value="${tpywlx}">
            <input type="hidden" name="spywlx" id="spywlx" th:value="${spywlx}">
            <input type="hidden" name="zf" id="zf" th:value="${pxglDto.cszf}">
            <input type="hidden" name="pxid" id ="pxid" th:value="${pxglDto.pxid}" >
            <input type="hidden" name="spfjid" id ="spfjid">
            <input type="hidden" name="formAction" id ="formAction" th:value="${formAction}">
            <input type="hidden" name="spbj_t" id ="spbj_t" th:value="${pxglDto.spbj}" >
            <input type="hidden" name="sfcs_t" id ="sfcs_t" th:value="${pxglDto.sfcs}" >
            <input type="hidden" name="sffshb_t" id ="sffshb_t" th:value="${pxglDto.sffshb}" >
            <input type="hidden" name="spfj" id="spfj" th:value="${num}">
            <input type="hidden" name="url" id="url" th:value="${url}">
            <input type="hidden" name="tklist" id="tklist" th:value="${tklist}">
            <input type="hidden" name="tmmx_json" id="tmmx_json"/>
            <input type="hidden" name="glwjids" id="glwjids"/>
            <input type="hidden" name="fjids" id ="fjids">
            <input type="hidden" name="fjid" id ="fjid" th:value="${tpfjDto.fjid}">
            <input type="hidden" name="flag" id ="flag" th:value="${flag}">
            <input type="hidden" name="xgqspxz" id ="xgqspxz" th:value="${pxglDto.xgqspxz}">
            <input type="hidden" name="yhbszid" id ="yhbszid" th:value="${pxglDto.hbszid}">
            <input type="hidden" name="hbvalue" id ="hbvalue" th:value="${pxglDto.sffshb}">
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        年度培训
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <div class="input-group">
                            <input type="text" id="pxmc" name="pxmc" th:value="${pxglDto.pxmc}"  readonly="true" class="form-control" />
                            <input type="hidden" id="ndpxid" name="ndpxid" th:value="${pxglDto.ndpxid}"  class="form-control"/>
                            <span class="input-group-btn">
                                <button type="button" onclick="chooseNdjh()" class="btn btn-primary" style="height:28px !important;">选择</button>
							</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>培训标题
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <input type="text" id="pxbt" name="pxbt" th:value="${pxglDto.pxbt}" validate="{required:true}" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>培训类别
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9" th:if="${pxlblist !=null && pxlblist.size() > 0}">
                        <select id="pxlb" name="pxlb" class="form-control chosen-select" validate="{required:true,stringMaxLength:32}" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${pxlblist}" th:value="${list.csid}" th:text="${list.csmc}"th:selected="${list.csmc eq pxglDto.pxlb}" ></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        培训子类别
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <select id="pxzlb" name="pxzlb" class="form-control chosen-select" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${pxzlblist}" th:value="${list.csid}" th:text="${list.csmc}"th:selected="${list.csmc eq pxglDto.pxzlb}" ></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>实施部门
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <div class="input-group">
                            <input type="text" id="bmmc" name="bmmc" th:value="${pxglDto.bmmc}" validate="{required:true}" readonly="true" class="form-control" />
                            <input type="hidden" id="bm" name="bm" th:value="${pxglDto.bm}"  class="form-control"/>
                            <span class="input-group-btn">
										<button type="button" onclick="chooseBm()" class="btn btn-primary" style="height:28px !important;">选择</button>
									</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>所属公司
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <select id="ssgs" name="ssgs" class="form-control chosen-select" validate="{required:true,stringMaxLength:32}" style="height:34px;" onchange="changessgs()">
                            <option value="">--请选择--</option>
                            <option th:each="list:${ssgslist}" th:value="${list.csid}" th:cskz1="${list.cskz1}" th:text="${list.csmc}"th:selected="${list.csid eq pxglDto.ssgs}")></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>确认人员
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9" th:if="${xtyhlist !=null && xtyhlist.size() > 0}">
                        <select id="qrry" name="qrry" class="form-control chosen-select" validate="{required:true,stringMaxLength:32}" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${xtyhlist}" th:value="${list.yhid}" th:text="${list.zsxm}" th:selected="${list.zsxm eq pxglDto.qrry}" ></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>过期时间
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <input type="text" id="gqsj" name="gqsj" th:value="${pxglDto.gqsj}" validate="{required:true}" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>视频/文档
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9" style="height:34px;">
                        <label class="radio-inline"><input type="radio" id="spbj_no"
                                                           value="0" name="spbj"   th:checked="${'否' eq pxglDto.spbj}">没有</label>
                        <label class="radio-inline"><input type="radio" id="spbj_yes"
                                                           value="1" name="spbj"   th:checked="${'是' eq pxglDto.spbj}">有</label>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-sm-3 col-sm-3 control-label">
                        <span style="color: red;">*</span>课时
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9" style="height:34px;">
                        <div class="input-group" >
                            <input type="text" id="ks" name="ks"   th:value="${pxglDto.ks}" validate="{required:true}"  onkeyup="this.value= this.value.match(/\d+(\.\d{0,2})?/) ? this.value.match(/\d+(\.\d{0,2})?/)[0] : ''" class="form-control" />
                            <span class="input-group-addon"> 时 </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-4">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">
                        <span style="color: red;">*</span>培训方式
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9" th:if="${pxfslist !=null && pxfslist.size() > 0}">
                        <select id="pxfs" name="pxfs" class="form-control chosen-select" validate="{required:true,stringMaxLength:32}" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${pxfslist}" th:value="${list.csid}" th:text="${list.csmc}" th:selected="${list.csid eq pxglDto.pxfs}" ></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <label for="" class="col-sm-1 col-md-1 col-xs-1 control-label">
                        培训内容
                    </label>
                    <div class="col-sm-11 col-xs-11 col-md-11">
                        <textarea id="pxnr" name="pxnr" rows="3"  th:text="${pxglDto.pxnr}" validate="{stringMaxLength:1024}" style="height: auto;" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12" id="yctp">
                <div class="form-group">
                    <label for="" class="col-sm-1 col-md-1 col-xs-1 control-label">
                        已传图片
                    </label>
                    <div class="col-sm-11 col-xs-11 col-md-11">
                        <div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
                            <div th:id="${fjcfbDto.fjid}" >
                                <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
                                <div class="col-sm-9 col-xs-9 col-md-9">
                                    <label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
                                    <button style="outline:none;margin-bottom:5px;padding:0px;" class="btn btn-link" type="button" title="下载" th:onclick="xz([[${fjcfbDto.fjid}]]);" >
                                        <span th:text="${fjcfbDto.wjm}"></span>
                                        <span class="glyphicon glyphicon glyphicon-save"></span>
                                    </button>&nbsp;&nbsp;
                                    <a title="预览" th:onclick="view([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjm}]])">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </a>&nbsp;&nbsp;
                                    <a title="删除"  th:onclick="del([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjlj}]]);">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12" id="tpsc">
                <div class="form-group">
                    <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label"><span style="color: red;">*</span>
                        图片上传(只支持上传.JPG和.PNG/.APNG格式)
                    </label>
                    <div class="col-sm-9 col-xs-9 col-md-9">
                        <a href="javascript:void(0);" id="C_Btn" onclick='editfile("C_Div","C_Btn")' style="display:inline-block;width:100%;border:1px solid #CCCCCC;border-radius:3px;">
                            <span title="点击上传"  style="display:inline-block;width:100%;height:28px;color:#A6A6A6;font-size:12px;padding-left:10px;line-height:28px;">点击展开上传文件</span>
                        </a>
                        <div id="C_Div" style="display: none;">
                            <input  id="sign_file" name="sign_file" type="file">
                            <button class="btn btn-default" type="button" style="position:relative;margin-top:-5%;margin-left:77%; width:23%;" onclick='cancelfile("C_Div","C_Btn")'>隐藏</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12" id="ycsp"  >
                <div class="form-group" th:if="${fjlist != null && fjlist.size() >0}"
                     th:each="fjcfbDto:${fjlist}" th:id="${fjcfbDto.fjid}">
                    <label for="" class="col-sm-1 col-md-1 col-xs-1 control-label" th:if="${fjcfbDtoStat.index == 0}">
                        已传视频/文档
                    </label>
                    <label for="" class="col-sm-1 col-md-1 col-xs-1 control-label" th:if="${fjcfbDtoStat.index != 0}">

                    </label>
                    <div class="col-sm-11 col-xs-11 col-md-11">
                        <div class="col-sm-12 padding_t7">
                            <a title="下载" th:onclick="xz([[${fjcfbDto.fjid}]]);" >
                                <span th:text="${fjcfbDto.wjm}"></span>
                                <span class="glyphicon glyphicon glyphicon-save"></span>
                            </a>
                            <a title="预览" th:onclick="view([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjm}]])">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </a>&nbsp;&nbsp;
                            <a title="删除" class="f_button">
                                <span class="glyphicon glyphicon-remove" th:onclick="del([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjlj}]]);"></span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12" id="spsc">
                <div class="form-group">
                    <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">
                        视频/文档上传(只支持上传.MP4/.doc/.docx/.xls/.xlsx/.pdf格式)
                    </label>
                    <div class="col-sm-8 col-xs-8 col-md-8">
                        <a href="javascript:void(0);" id="C_Btn_sp" onclick='editfile("C_Div_sp","C_Btn_sp")' style="display:inline-block;width:100%;border:1px solid #CCCCCC;border-radius:3px;">
                            <span title="点击上传"  style="display:inline-block;width:100%;height:28px;color:#A6A6A6;font-size:12px;padding-left:10px;line-height:28px;">点击展开上传文件</span>
                        </a>
                        <div id="C_Div_sp" style="display: none;">
                            <input  id="sign_file_sp" name="sign_file" type="file">
                            <button class="btn btn-default" type="button" style="position:relative;margin-top:-5%;margin-left:77%; width:23%;" onclick='cancelfile("C_Div_sp","C_Btn_sp")'>隐藏</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        是否公开
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio" id="sfgk_no"
                                                           value="0" name="sfgk"  th:checked="${'0' eq pxglDto.sfgk}">否</label>
                        <label class="radio-inline"><input type="radio" id="sfgk_yes"
                                                           value="1" name="sfgk"  th:checked="${'1' eq pxglDto.sfgk}">是</label>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>是否测试
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio" id="sfcs_no"
                                                           value="0" name="sfcs" validate="{required:true}" th:checked="${'否' eq pxglDto.sfcs}">否</label>
                        <label class="radio-inline"><input type="radio" id="sfcs_yes"
                                                           value="1" name="sfcs" validate="{required:true}" th:checked="${'是' eq pxglDto.sfcs}">是</label>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>到期提醒
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio"
                                                           value="0" id="dqtx_no"  name="dqtx" validate="{required:true}" th:checked="${'0' eq pxglDto.dqtx}">否</label>
                        <label class="radio-inline"><input type="radio"
                                                           value="1" id="dqtx_yes" name="dqtx"  validate="{required:true}" th:checked="${'1' eq pxglDto.dqtx}">是</label>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>发送红包
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio"
                                                           value="0" id="sffshb_no"  name="sffshb" validate="{required:true}" th:checked="${'否' eq pxglDto.sffshb}">否</label>
                        <label class="radio-inline"><input type="radio"
                                                           value="1" id="sffshb_yes"  name="sffshb"  validate="{required:true}" th:checked="${'是' eq pxglDto.sffshb}">是</label>
                    </div>
                </div>
            </div>
            <div id="hbsz" class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-md-6 col-sm-6  control-label">
                        <span style="color: red;">*</span>红包
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <select id="hbszid" name="hbszid" class="form-control chosen-select" style="height:30px;" >
                            <option value="">--请选择--</option>
                            <option th:each="list:${hbszlist}" th:value="${list.hbszid}"  th:text="${list.hbmc}"th:selected="${list.hbszid eq pxglDto.hbszid}")></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3" id="hspxz">
                <div class="form-group" >
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>视频是否允许下载
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio"
                                                           value="0" name="spxz" th:checked="${'0' eq pxglDto.spxz}">否</label>
                        <label class="radio-inline"><input type="radio"
                                                           value="1" name="spxz" th:checked="${'1' eq pxglDto.spxz}">是</label>
                    </div>
                </div>
            </div>
            <div id="csDiv">
                <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>查看答案
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio"
                                                           value="0" name="ckdabj" validate="{required:true}" th:checked="${'否' eq pxglDto.ckdabj}">否</label>
                        <label class="radio-inline"><input type="radio"
                                                           value="1" name="ckdabj" validate="{required:true}" th:checked="${'是' eq pxglDto.ckdabj}">是</label>
                    </div>
                </div>
                </div>
                <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>当场重考
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <label class="radio-inline"><input type="radio"
                                                           value="0" name="dcckbj" validate="{required:true}" th:checked="${'否' eq pxglDto.dcckbj}">否</label>
                        <label class="radio-inline"><input type="radio"
                                                           value="1" name="dcckbj"  validate="{required:true}" th:checked="${'是' eq pxglDto.dcckbj}">是</label>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>测试时长
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <div class="input-group" >
                            <input type="text" id="cssc" name="cssc"   th:value="${pxglDto.cssc}"  placeholder="大于等于0的数字" onkeyup="this.value= this.value.match(/\d+(\.\d{0,2})?/) ? this.value.match(/\d+(\.\d{0,2})?/)[0] : ''" class="form-control" />
                            <span class="input-group-addon"> 分钟 </span>
                        </div>
                    </div>
                </div>
            </div>
                <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        测试次数
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <div class="input-group" >
                            <input type="text" id="kscs" name="kscs"   th:value="${pxglDto.kscs}"  placeholder="测试次数至少为1" onkeyup="this.value= this.value.match(/\d+(\.\d{0,2})?/) ? this.value.match(/\d+(\.\d{0,2})?/)[0] : ''" class="form-control" />
                            <span class="input-group-addon"> 次 </span>
                        </div>
                    </div>
                </div>
            </div>
                <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-6 col-sm-6 col-sm-6 control-label">
                        <span style="color: red;">*</span>通过分数
                    </label>
                    <div class="col-sm-6 col-xs-6 col-md-6">
                        <div class="input-group" >
                            <input type="text" id="tgfs" name="tgfs"  th:value="${pxglDto.tgfs}" validate="{required:true}" placeholder="大于等于0的数字" onkeyup="this.value= this.value.match(/\d+(\.\d{0,2})?/) ? this.value.match(/\d+(\.\d{0,2})?/)[0] : ''" class="form-control" />
                            <span class="input-group-addon"> 分 </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12">
                <button  type="button" class="btn btn-success" onclick="addGlwj()" ><span>关联文件</span></button>
            </div>
            <table id="glwj_list" data-classes="table" style="width:1530px;margin-left:15px;"></table>
            <div class="col-md-12 col-sm-12">
                <button  type="button" class="btn btn-success" onclick="addnew()" ><span>新增</span></button>
                <label for="" class="control-label">
                   当前总分：
                </label>
                <span  id="cszf" name="cszf" style="color: red"></span>
            </div>
                <table id="tb_list" data-classes="table" style="width:1530px;margin-left:15px;"></table>
            </div>
        </div>
    </div>
</form>
</body>
<script type="text/javascript" th:src="@{${urlPrefix} + '/js/train/train/train_edit.js?v=20231012001'}" charset="utf-8"></script>
</html>
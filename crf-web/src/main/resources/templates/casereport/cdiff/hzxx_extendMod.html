<!DOCTYPE html>
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <style>
    </style>
</head>
<body>
<form id="hzxxExtendModJnsj_ajaxForm" action="/crf/cdiff/extendUpdateJnsj" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation">
    <div class="body-content tab-content">
        <div role="tabpanel" class="tab-pane fade active in" id="extendmodInfoTab" aria-labelledby="profile-tab">
            <div class="panel-body">
                <input type="hidden" name="access_token" />
                <input type="hidden" id="jnsjbgid" name="jnsjbgid" th:value="${jnsjbgjlDto.jnsjbgid}"/>
                <input type="hidden" name="jnsjjcjg_json" id="jnsjjcjg_json"/>

                <div class="panel panel-default">
                    <div class="panel-heading col-md-12 col-sm-12 col-xs-12">
                        <div class="col-md-10 col-sm-10 col-xs-10">
                            <h2 class="panel-title">
                                <strong><span style="color: red;">*</span>基本信息</strong>
                            </h2>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">患者姓名：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.xm}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">年龄(岁)：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.nl}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">性别：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.xbmc}" ></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">入组单位：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.blrzdwmc}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">入组编号：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.blrzbh}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">填表时间：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.tbsj}" ></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">住院号：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.zyh}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">科室：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.ksmc}" ></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="form-group">
                                <label for="" class="col-sm-4 col-md-4 col-xs-4 control-label">就诊类型：</label>
                                <div class="col-sm-8 col-md-8 col-xs-8 padding_t7">
                                    <span th:text="${jnsjbgjlDto.jzlxmc}" ></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="row" style="padding-right: 20px;">
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">MLST分型：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <input type="text" id="mlst" name="mlst" class="form-control" th:value="${jnsjbgjlDto.mlst}" validate="{digits:true}" placeholder="请输入整数"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">核糖体分型：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <input id="httfx" name="httfx" class="form-control" th:value="${jnsjbgjlDto.httfx}" validate="{digits:true}" placeholder="请输入整数"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">tcdA：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <label class="radio-inline"><input type="radio" value="0" name="tcda" th:checked="${'0' eq jnsjbgjlDto.tcda}"  >阴性</label>
                                    <label class="radio-inline"><input type="radio" value="1" name="tcda" th:checked="${'1' eq jnsjbgjlDto.tcda}"  >阳性</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">tcdB：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <label class="radio-inline"><input type="radio" value="0" name="tcdb" th:checked="${'0' eq jnsjbgjlDto.tcdb}"  >阴性</label>
                                    <label class="radio-inline"><input type="radio" value="1" name="tcdb" th:checked="${'1' eq jnsjbgjlDto.tcdb}"  >阳性</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">ctdC：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <label class="radio-inline"><input type="radio" value="0" name="ctdc" th:checked="${'0' eq jnsjbgjlDto.ctdc}"  >阴性</label>
                                    <label class="radio-inline"><input type="radio" value="1" name="ctdc" th:checked="${'1' eq jnsjbgjlDto.ctdc}"  >阳性</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">ctdD：</label>
                                <div class="col-sm-8 col-xs-12">
                                    <label class="radio-inline"><input type="radio" value="0" name="ctdd" th:checked="${'0' eq jnsjbgjlDto.ctdd}"  >阴性</label>
                                    <label class="radio-inline"><input type="radio" value="1" name="ctdd" th:checked="${'1' eq jnsjbgjlDto.ctdd}"  >阳性</label>
<!--                                        <input id="ctdd" name="ctdd" class="form-control" th:value="${jnsjbgjlDto.ctdd}" />-->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">美罗培南：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="mlpn" name="mlpn" class="form-control" th:value="${jnsjbgjlDto.mlpn}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="mlpnmg" name="mlpnmg" class="form-control" th:value="${mlpnmg}"/>
<!--                                        <span><input id="mlpnmgmc" name="mlpnmgmc" class="form-control" th:value="${mlpnmg>0?'敏感':'不敏感'}"/></span>-->
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="mlpnmgmc" name="mlpnmgmc" class="form-control" th:value="${mlpnmg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">万古霉素：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="wgms" name="wgms" class="form-control" th:value="${jnsjbgjlDto.wgms}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="wgmsmg" name="wgmsmg" class="form-control" th:value="${wgmsmg}"/>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="wgmsmgmc" name="wgmsmgmc" class="form-control" th:value="${wgmsmg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">利奈唑胺：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="lnza" name="lnza" class="form-control" th:value="${jnsjbgjlDto.lnza}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="lnzamg" name="lnzamg" class="form-control" th:value="${lnzamg}"/>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="lnzamgmc" name="lnzamgmc" class="form-control" th:value="${lnzamg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">甲硝唑：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="jxz" name="jxz" class="form-control" th:value="${jnsjbgjlDto.jxz}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="jxzmg" name="jxzmg" class="form-control" th:value="${jxzmg}"/>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="jxzmgmc" name="jxzmgmc" class="form-control" th:value="${jxzmg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">莫西沙星：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="mxsx" name="mxsx" class="form-control" th:value="${jnsjbgjlDto.mxsx}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
<!--                                    <input type="hidden" id="mxsxmg" name="mxsxmg" class="form-control" th:value="${mxsxmg}"/>-->
                                </div>
                                <!--<div class="col-sm-2 col-xs-4">
                                    <input id="mxsxmgmc" name="mxsxmgmc" class="form-control" th:value="${mxsxmg>0?'敏感':'不敏感'}"></input>
                                </div>-->
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">替考拉宁：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="tkln" name="tkln" class="form-control" th:value="${jnsjbgjlDto.tkln}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
<!--                                    <input type="hidden" id="tklnmg" name="tklnmg" class="form-control" th:value="${tklnmg}"/>-->
                                </div>
<!--                                <div class="col-sm-2 col-xs-4">-->
<!--                                    <input id="tklnmgmc" name="tklnmgmc" class="form-control" th:value="${tklnmg>0?'敏感':'不敏感'}"></input>-->
<!--                                </div>-->
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">利福昔明：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="lfxm" name="lfxm" class="form-control" th:value="${jnsjbgjlDto.lfxm}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="lfxmmg" name="lfxmmg" class="form-control" th:value="${lfxmmg}"/>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="lfxmmgmc" name="lfxmmgmc" class="form-control" th:value="${lfxmmg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">达托霉素：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="dtms" name="dtms" class="form-control" th:value="${jnsjbgjlDto.dtms}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
<!--                                    <input type="hidden" id="dtmsmg" name="dtmsmg" class="form-control" th:value="${dtmsmg}"/>-->
                                </div>
<!--                                <div class="col-sm-2 col-xs-4">-->
<!--                                    <input id="dtmsmgmc" name="dtmsmgmc" class="form-control" th:value="${dtmsmg>0?'敏感':'不敏感'}"></input>-->
<!--                                </div>-->
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12" style="margin-top: 10px">
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label">克林霉素：</label>
                                <div class="col-sm-6 col-xs-8">
                                    <input id="klms" name="klms" class="form-control" th:value="${jnsjbgjlDto.klms}" validate="{float:true}" placeholder="请输入数字，整数如1输入1.0"/>
                                    <input type="hidden" id="klmsmg" name="klmsmg" class="form-control" th:value="${klmsmg}"/>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <input id="klmsmgmc" name="klmsmgmc" class="form-control" th:value="${klmsmg>0?'敏感':'不敏感'}"></input>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button  type="button" class="btn btn-success" onclick="addnew()" ><span id="cofirmaddwl">新增</span></button>
                <table id="jcjg_list" data-classes="table" style="width:1530px;margin-left:8px;"></table>
            </div>
        </div>
    </div>
</form>
</body>
<script type="text/javascript">
    var JnsjhzxxView_TableInit = function () {
        var oTableInit = new Object();
        //初始化Table
        oTableInit.Init = function (){
            $('#hzxxExtendModJnsj_ajaxForm #jcjg_list').bootstrapTable({
                url: '/crf/cdiff/getjcjgList?jnsjbgid='+$("#hzxxExtendModJnsj_ajaxForm #jnsjbgid").val(),         //请求后台的URL（*）
                method: 'get',                      //请求方式（*）
                toolbar: '#hzxxExtendModJnsj_ajaxForm #toolbar',                //工具按钮用哪个容器
                striped: true,                      //是否显示行间隔色
                cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                pagination: true,                   //是否显示分页（*）
                paginationShowPageGo: true,         //增加跳转页码的显示
                sortable: true,                     //是否启用排序
                sortName: "jcjg.jnsjjcsj",				//排序字段
                sortOrder: "DESC",                   //排序方式
                queryParams: oTableInit.queryParams,//传递参数（*）
                sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
                pageNumber:1,                       //初始化加载第一页，默认第一页
                pageSize: 15,                       //每页的记录行数（*）
                pageList: [15, 30, 50, 100],        //可供选择的每页的行数（*）
                paginationPreText: '‹',				//指定分页条中上一页按钮的图标或文字,这里是<
                paginationNextText: '›',			//指定分页条中下一页按钮的图标或文字,这里是>
                search: false,                      //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
                strictSearch: true,
                showColumns: true,                  //是否显示所有的列
                showRefresh: true,                  //是否显示刷新按钮
                minimumCountColumns: 2,             //最少允许的列数
                clickToSelect: true,                //是否启用点击选中行
                //height: 500,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                uniqueId: "jnsjjcsj",                     //每一行的唯一标识，一般为主键列
                showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
                cardView: false,                    //是否显示详细视图
                detailView: false,                   //是否显示父子表
                pagination:false,
                columns:[{
                    field: 'jnsjjcsj',
                    title: '艰难梭菌检测时间',
                    titleTooltip:'艰难梭菌检测时间',
                    width: '10%',
                    align: 'left',
                    formatter:jnsjjcsj_format,
                    visible:true
                },{
                    field: 'gdhjg',
                    title: 'GDH结果',
                    titleTooltip:'GDH结果',
                    width: '10%',
                    align: 'left',
                    // formatter:jcjgformat,
                    formatter:gdhjg_format,
                    visible:true
                },{
                    field: 'toxinjg',
                    title: 'TOXIN结果',
                    titleTooltip:'TOXIN结果',
                    width: '10%',
                    align: 'left',
                    // formatter:jcjgformat,
                    formatter:toxinjg_format,
                    visible:true
                },{
                    field: 'dbjnsjpyjg',
                    title: '大便艰难梭菌培养结果',
                    titleTooltip:'大便艰难梭菌培养结果',
                    width: '10%',
                    align: 'left',
                    // formatter:jcjgformat,
                    formatter:dbjnsjpyjg_format,
                    visible:true
                },{
                    field: 'jnsjmspyjg',
                    title: '艰难梭菌毒素培养结果',
                    titleTooltip:'艰难梭菌毒素培养结果',
                    width: '10%',
                    align: 'left',
                    // formatter:jcjgformat,
                    formatter:jnsjmspyjg_format,
                    visible:true
                },{
                    field: 'cz',
                    title: '操作',
                    width: '5%',
                    align: 'left',
                    formatter:czformat,
                    visible: true
                }],
                onLoadSuccess: function (map) {
                    t_map = map;
                    if(t_map.rows){
                        // 初始化jnsjjcjg_json
                        var json = [];
                        for (var i = 0; i < t_map.rows.length; i++) {
                            var sz = {"index":i,"jnsjjcsj":'',"gdhjg":'',"toxinjg":'',"dbjnsjpyjg":'',"jnsjmspyjg":''};
                            sz.jnsjjcsj = t_map.rows[i].jnsjjcsj;
                            sz.gdhjg = t_map.rows[i].gdhjg;
                            sz.toxinjg = t_map.rows[i].toxinjg;
                            sz.dbjnsjpyjg = t_map.rows[i].dbjnsjpyjg;
                            sz.jnsjmspyjg = t_map.rows[i].jnsjmspyjg;
                            json.push(sz);
                        }
                        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(json));
                    }
                },
                onLoadError: function () {
                    alert("数据加载失败！");
                },
            });
            $("#hzxxExtendModJnsj_ajaxForm #jcjg_list").colResizable({
                    liveDrag:true,
                    gripInnerHtml:"<div class='grip'></div>",
                    draggingClass:"dragging",
                    resizeMode:'fit',
                    postbackSafe:true,
                    partialRefresh:true
                }
            );
        };
        // 得到查询的参数
        oTableInit.queryParams = function(params){
            var map = {   // 这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
                access_token:$("#ac_tk").val(),
                // ybbh: $("#ybbh").val()
            };
            return map;
        };
        return oTableInit;
    }

    function jnsjjcsj_format(value,row,index){
        if ( value == null || value == undefined || value == '' ){
            var html="<input id='jnsjjcsj_"+index+"' name='jnsjjcsj_"+index+"' value='"+row.jnsjjcsj+"'  style='width:85%;border-radius:5px;border:1px solid #D5D5D5;' readonly ></input>";
            setTimeout(function() {
                laydate.render({
                    elem: '#hzxxExtendModJnsj_ajaxForm #jnsjjcsj_'+index
                    ,theme: '#2381E9'
                    ,btns: ['clear', 'confirm']
                    ,done: function(value, date, endDate){
                        t_map.rows[index].jnsjjcsj=value;
                        var data=JSON.parse($("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val())
                        data[index].jnsjjcsj=value;
                        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
                    }
                });
            },100)
            return html;
        }else {
            return value;
        }
    }
    function changeJcsj(row,index){
        var data=$("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable("getData");
        if(data!=null && data.length>0){
            data[index].jnsjjcsj=$("#hzxxExtendModJnsj_ajaxForm #jnsjjcsj_"+index).val();
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
    }

    function gdhjg_format(value,row,index){
        if(row.gdhjg==0){
            // return '阴性';   checked="+('0' == row.gdhjg)+"
            var html = "<label className=\"radio-inline\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>" +
                "          <input type=\"radio\" value=\"0\" name='gdhjg_"+index+"' id='gdhjg_"+index+"' checked validate=\"{required:true}\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>阴性" +
                "       </label>\n" +
"                       <label className=\"radio-inline\" onchange='changeGdhjg("+row.gdhjg+","+index+")'> " +
                "          <input type=\"radio\" value=\"1\" name='gdhjg_"+index+"' id='gdhjg_"+index+"'  validate=\"{required:true}\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>阳性" +
                "       </label>";
            return html;
        }else if(row.gdhjg=='1'){
            var html = "<label className=\"radio-inline\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>" +
                "          <input type=\"radio\" value=\"0\" name='gdhjg_"+index+"' id='gdhjg_"+index+"'  validate=\"{required:true}\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>阴性" +
                "       </label>\n" +
"                       <label className=\"radio-inline\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>" +
                "          <input type=\"radio\" value=\"1\" name='gdhjg_"+index+"' id='gdhjg_"+index+"' checked validate=\"{required:true}\" onchange='changeGdhjg("+row.gdhjg+","+index+")'>阳性" +
                "       </label>";
            return html;
        }
    }
    function toxinjg_format(value,row,index){
        if(row.toxinjg=='0'){
            // return '阴性';
            var html = "<label className=\"radio-inline\" onchange='changeToxinjg("+row.toxinjg+","+index+")'>" +
                "            <input type=\"radio\" value=\"0\" name='toxinjg_"+index+"' id='toxinjg_"+index+"' checked validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeToxinjg("+row.toxinjg+","+index+")'>" +
                "            <input type=\"radio\" value=\"1\" name='toxinjg_"+index+"' id='toxinjg_"+index+"'  validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }else if(row.toxinjg=='1'){
            // return '阳性';
            var html = "<label className=\"radio-inline\" onchange='changeToxinjg("+row.toxinjg+","+index+")'>" +
                "             <input type=\"radio\" value=\"0\" name='toxinjg_"+index+"' id='toxinjg_"+index+"'  validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeToxinjg("+row.toxinjg+","+index+")'>" +
                "             <input type=\"radio\" value=\"1\" name='toxinjg_"+index+"' id='toxinjg_"+index+"' checked validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }
    }
    function dbjnsjpyjg_format(value,row,index){
        if(row.dbjnsjpyjg=='0'){
            // return '阴性';
            var html = "<label className=\"radio-inline\" onchange='changeDbjnsjpyjg("+row.dbjnsjpyjg+","+index+")'>" +
                "             <input type=\"radio\" value=\"0\" name='dbjnsjpyjg_"+index+"' id='dbjnsjpyjg_"+index+"' checked validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeDbjnsjpyjg("+row.dbjnsjpyjg+","+index+")'>" +
                "             <input type=\"radio\" value=\"1\" name='dbjnsjpyjg_"+index+"' id='dbjnsjpyjg_"+index+"'  validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }else if(row.dbjnsjpyjg=='1'){
            // return '阳性';
            var html = "<label className=\"radio-inline\" onchange='changeDbjnsjpyjg("+row.dbjnsjpyjg+","+index+")'>" +
                "            <input type=\"radio\" value=\"0\" name='dbjnsjpyjg_"+index+"' id='dbjnsjpyjg_"+index+"'  validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeDbjnsjpyjg("+row.dbjnsjpyjg+","+index+")'>" +
                "            <input type=\"radio\" value=\"1\" name='dbjnsjpyjg_"+index+"' id='dbjnsjpyjg_"+index+"' checked validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }
    }
    function jnsjmspyjg_format(value,row,index){
        if(row.jnsjmspyjg=='0'){
            // return '阴性';
            var html = "<label className=\"radio-inline\" onchange='changeJnsjmspyjg("+row.jnsjmspyjg+","+index+")'>" +
                "              <input type=\"radio\" value=\"0\" name='jnsjmspyjg_"+index+"' id='jnsjmspyjg_"+index+"' checked validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeJnsjmspyjg("+row.jnsjmspyjg+","+index+")'>" +
                "              <input type=\"radio\" value=\"1\" name='jnsjmspyjg_"+index+"' id='jnsjmspyjg_"+index+"'  validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }else if(row.jnsjmspyjg=='1'){
            // return '阳性';
            var html = "<label className=\"radio-inline\" onchange='changeJnsjmspyjg("+row.jnsjmspyjg+","+index+")'>" +
                "              <input type=\"radio\" value=\"0\" name='jnsjmspyjg_"+index+"' id='jnsjmspyjg_"+index+"'  validate=\"{required:true}\">阴性" +
                "       </label>\n" +
                "       <label className=\"radio-inline\" onchange='changeJnsjmspyjg("+row.jnsjmspyjg+","+index+")'>" +
                "              <input type=\"radio\" value=\"1\" name='jnsjmspyjg_"+index+"' id='jnsjmspyjg_"+index+"' checked validate=\"{required:true}\">阳性" +
                "       </label>";
            return html;
        }
    }

    function changeGdhjg(row,index){
        var data=$("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable("getData");
        if(data!=null && data.length>0){
            data[index].gdhjg=$('input:radio[name="gdhjg_'+index+'"]:checked').val();
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
    }
    function changeToxinjg(row,index){
        var data=$("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable("getData");
        if(data!=null && data.length>0){
            data[index].toxinjg=$('input:radio[name="toxinjg_'+index+'"]:checked').val();
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
    }
    function changeDbjnsjpyjg(row,index){
        var data=$("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable("getData");
        if(data!=null && data.length>0){
            data[index].dbjnsjpyjg=$('input:radio[name="dbjnsjpyjg_'+index+'"]:checked').val();
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
    }
    function changeJnsjmspyjg(row,index){
        var data=$("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable("getData");
        if(data!=null && data.length>0){
            data[index].jnsjmspyjg=$('input:radio[name="jnsjmspyjg_'+index+'"]:checked').val();
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
    }

    //操作格式化
    function czformat(value,row,index){
        var html = "<span style='margin-left:5px;' class='btn btn-default' title='移出艰难梭菌检测结果数据' onclick=\"delJnsjjcjgData('" + index + "',event)\" >删除</span>";
        return html;
    }
    //新增明细
    function addnew(){
        var data=JSON.parse($("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val());
        var a={"index":data.length,"jnsjjcsj":'',"gdhjg":'0',"toxinjg":'0',"dbjnsjpyjg":'0',"jnsjmspyjg":'0'};
        t_map.rows.push(a);
        data.push(a);
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(data));
        $("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable('load',t_map);
    }
    //删除操作
    function delJnsjjcjgData(index,event){
        var t_data = JSON.parse($("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val());
        t_map.rows.splice(index,1);
        for(var i=0;i<t_data.length;i++){
            if(t_data[i].index == index){
                t_data.splice(i,1);
            }
        }
        $("#hzxxExtendModJnsj_ajaxForm #jcjg_list").bootstrapTable('load',t_map);
        var json=[];
        for(var i=0;i<t_data.length;i++){
            var sz={"index":i,"jnsjjcsj":'',"gdhjg":'',"toxinjg":'',"dbjnsjpyjg":'',"jnsjmspyjg":''};
            sz.jnsjjcsj=t_data[i].jnsjjcsj;
            sz.gdhjg=t_data[i].gdhjg;
            sz.toxinjg=t_data[i].toxinjg;
            sz.dbjnsjpyjg=t_data[i].dbjnsjpyjg;
            sz.jnsjmspyjg=t_data[i].jnsjmspyjg;
            json.push(sz);
        }
        $("#hzxxExtendModJnsj_ajaxForm #jnsjjcjg_json").val(JSON.stringify(json));
    }

    $(function(){
        dataInit();
        function dataInit(){
            var mlpnmg = Number($("#hzxxExtendModJnsj_ajaxForm #mlpn").val())>=16 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #mlpnmg").val(mlpnmg);
            var mlpnmgmc = mlpnmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #mlpnmgmc").val(mlpnmgmc);
            // console.log("美罗培南"+mlpnmg);

            var wgmsmg = Number($("#hzxxExtendModJnsj_ajaxForm #wgms").val())>=2 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #wgmsmg").val(wgmsmg);
            var wgmsmgmc = wgmsmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #wgmsmgmc").val(wgmsmgmc);
            // console.log("万古霉素"+wgmsmg);

            var lnzamg = Number($("#hzxxExtendModJnsj_ajaxForm #lnza").val())>=4 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #lnzamg").val(lnzamg);
            var lnzamgmc = lnzamg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #lnzamgmc").val(lnzamgmc);
            // console.log("利奈唑胺"+lnzamg);

            var jxzmg = Number($("#hzxxExtendModJnsj_ajaxForm #jxz").val())>=32 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #jxzmg").val(jxzmg);
            var jxzmgmc = jxzmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #jxzmgmc").val(jxzmgmc);
            // console.log("甲硝唑"+jxzmg);

            var lfxmmg = Number($("#hzxxExtendModJnsj_ajaxForm #lfxm").val())>=4 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #lfxmmg").val(lfxmmg);
            var lfxmmgmc = lfxmmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #lfxmmgmc").val(lfxmmgmc);
            // console.log("利福昔明"+lfxmmg);

            var klmsmg = Number($("#hzxxExtendModJnsj_ajaxForm #klms").val())>=8 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #klmsmg").val(klmsmg);
            var klmsmgmc = klmsmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #klmsmgmc").val(klmsmgmc);
            // console.log("克林霉素"+klmsmg);
        }
        //敏感规则  美罗培南>=16, 万古霉素>=2, 利奈唑胺>=4, 甲硝唑>=32, 利福昔明>=4, 克林霉素>=8       替考拉宁和达托霉素没有折点，即：不用设置规则，只记录数字就可
        var mlpn = $("#hzxxExtendModJnsj_ajaxForm #mlpn").val();
        $("#hzxxExtendModJnsj_ajaxForm #mlpn").blur(function (){
            var mlpnmg = Number($("#hzxxExtendModJnsj_ajaxForm #mlpn").val())>=16 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #mlpnmg").val(mlpnmg);
            var mlpnmgmc = mlpnmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #mlpnmgmc").val(mlpnmgmc);
            // console.log("美罗培南"+mlpnmg);
        })
        var wgms = $("#hzxxExtendModJnsj_ajaxForm #wgms").val();
        $("#hzxxExtendModJnsj_ajaxForm #wgms").blur(function (){
            var wgmsmg = Number($("#hzxxExtendModJnsj_ajaxForm #wgms").val())>=2 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #wgmsmg").val(wgmsmg);
            var wgmsmgmc = wgmsmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #wgmsmgmc").val(wgmsmgmc);
            // console.log("万古霉素"+wgmsmg);
        })
        var lnza = $("#hzxxExtendModJnsj_ajaxForm #lnza").val();
        $("#hzxxExtendModJnsj_ajaxForm #lnza").blur(function (){
            var lnzamg = Number($("#hzxxExtendModJnsj_ajaxForm #lnza").val())>=4 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #lnzamg").val(lnzamg);
            var lnzamgmc = lnzamg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #lnzamgmc").val(lnzamgmc);
            // console.log("利奈唑胺"+lnzamg);
        })
        var jxz = $("#hzxxExtendModJnsj_ajaxForm #jxz").val();
        $("#hzxxExtendModJnsj_ajaxForm #jxz").blur(function (){
            var jxzmg = Number($("#hzxxExtendModJnsj_ajaxForm #jxz").val())>=32 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #jxzmg").val(jxzmg);
            var jxzmgmc = jxzmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #jxzmgmc").val(jxzmgmc);
            // console.log("甲硝唑"+jxzmg);
        })
        var lfxm = $("#hzxxExtendModJnsj_ajaxForm #lfxm").val();
        $("#hzxxExtendModJnsj_ajaxForm #lfxm").blur(function (){
            var lfxmmg = Number($("#hzxxExtendModJnsj_ajaxForm #lfxm").val())>=4 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #lfxmmg").val(lfxmmg);
            var lfxmmgmc = lfxmmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #lfxmmgmc").val(lfxmmgmc);
            // console.log("利福昔明"+lfxmmg);
        })
        var klms = $("#hzxxExtendModJnsj_ajaxForm #klms").val();
        $("#hzxxExtendModJnsj_ajaxForm #klms").blur(function (){
            var klmsmg = Number($("#hzxxExtendModJnsj_ajaxForm #klms").val())>=8 ? "1":"0";
            $("#hzxxExtendModJnsj_ajaxForm #klmsmg").val(klmsmg);
            var klmsmgmc = klmsmg>0 ? "敏感":"不敏感";
            $("#hzxxExtendModJnsj_ajaxForm #klmsmgmc").val(klmsmgmc);
            // console.log("克林霉素"+klmsmg);
        })

        //初始化列表
        var oTable=new JnsjhzxxView_TableInit();
        oTable.Init();
        jQuery('#hzxxExtendModJnsj_ajaxForm .chosen-select').chosen({width: '100%'});
    })

</script>
</html>
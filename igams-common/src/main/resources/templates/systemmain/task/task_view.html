<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<script type="text/javascript" th:src="@{${urlprefix} +'/js/systemmain/task/task_view.js?v=20240902'}" charset="utf-8"></script>
		<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
		<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/fileinput.min.css" />
		<style type="text/css">
			#fjcfbDto span:hover{
				cursor:pointer;
			}
			.f_button{
				background: white;
				border: 0;
			}
			.f_button:hover{
				border-width: 0px; 
 				border-radius: 3px;
 				background: #1E90FF;
 				cursor: pointer; 
 				outline: none;
 				font-family: Microsoft YaHei; 
 				color: white; 
 				font-size: 14px; 
			}
			.tab{
				border: 1px solid #DEDEDE;
				width:100%;
			}
			.tab thead tr{
				background-color: #63a3ff;
				height: 30px;
				color:#000;

			}
			.tab th{
				border: 1px solid #DEDEDE;
				padding-left:5px;
				padding-top:2px;
				font-size: 10px;
				font-weight: bold;
			}
			.tab td{
				border: 1px solid #DEDEDE;
				height:25px;
				padding-left:5px;
				padding-top:2px;
				font-size: 10px;
			}
			.width_1{
				width: 14%;
			}
			#tabAttainmentRate thead tr{
				background-color:#00B2EE;
				height:40px;
			}
			#tabAttainmentRate tr{
				cursor: pointer;
			}
			#tabAttainmentRate th{
				border:1px solid #C9C9C9;
				text-align: center;
			}
			#tabAttainmentRate td{
				border:1px solid #C9C9C9;
				text-align: center;
			}
			#tabAttainmentRate .qu_td{
				width:25%;
			}

			#tabAttainmentRate tbody .qu_td{
				background-color:#E0FFFF;
			}
			#tabAttainmentRate .other_td{
				width:25%;
			}
			.tab tbody tr:nth-of-type(even){ background:#FFFFFF;}偶数行
		</style>
	</head>
	<body>
		<div id="task_view">
			<form id="taskViewForm" th:action="${urlprefix}+'/systemmain/task/viewSaveTask'" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation">
				<ul class="nav nav-tabs sl_nav_tabs" role="tablist">
					<li  class="nav-item" ><a  class="nav-link active" href="#rwjdTab" role="tab" data-bs-toggle="tab">任务进度</a></li>
					<li  class="nav-item" ><a  class="nav-link" href="#xmjdTab" role="tab" data-bs-toggle="tab">任务阶段</a></li>
					<li  class="nav-item" ><a  class="nav-link" href="#rwlyTab" role="tab" data-bs-toggle="tab">任务履历</a></li>
					<li  class="nav-item" ><a  class="nav-link" href="#lyTab" role="tab" data-bs-toggle="tab">任务评论</a></li>
				</ul>
				<div class="body-content tab-content">
					<input type="hidden" name="gzid" id="gzid" th:value="${gzglDto.gzid}"/>
					<input type="hidden" name="rwid" id="rwid" th:value="${gzglDto.rwid}"/>
					<input type="hidden" name="message_fjids" id ="message_fjids">
					<input type="hidden" name="access_token"/>
					<input type="hidden" id ="gzzt" name="gzzt" th:value="${gzglDto.zt}">
					<input type="hidden" name="urlprefix" id ="urlprefix" th:value="${urlprefix}" >
					<div role="tabpanel" class="tab-pane fade active in" id="rwjdTab" aria-labelledby="home-tab" >
						<div class="panel-body">
							<div class="row">
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">业务名称</label>
										<div class="col-sm-9 padding_t7">
											<a style="cursor:pointer;color:rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 1));" th:@click.prevent="'viewtask(\''+${gzglDto.ywdz}+'\',\''+${gzglDto.urlqz}+'\');'">
												<span th:text="${gzglDto.ywmc}"></span>
											</a>
										</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">任务名称</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.rwmc}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">当前确认人</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.qrrymc}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">创建人</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.lrryxm}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">创建时间</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.lrsj}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">期望完成日期</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.fqwwcsj}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">状态</label>
										<div class="col-sm-9 padding_t7">
											<a href="javascript:void(0);" onclick="viewAuditHistory()" th:if="${gzglDto.zt == '00'}">未完成</a>
											<a href="javascript:void(0);" onclick="viewAuditHistory()" th:if="${gzglDto.zt == '10'}">确认中</a>
											<a href="javascript:void(0);" onclick="viewAuditHistory()" th:if="${gzglDto.zt == '15'}">无需完成</a>
											<a href="javascript:void(0);" onclick="viewAuditHistory()" th:if="${gzglDto.zt == '80'}">已完成</a>
										</div>
									</div>
								</div>
								<div id="jd" class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">进度</label>
										<div class="col-sm-9 padding_t7" id="dqjd" th:text="${gzglDto.dqjd}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">备注</label>
										<div class="col-sm-9 padding_t7" th:text="${gzglDto.bz}">&nbsp;</div>
									</div>
								</div>
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="form-group">
										<div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
											<div th:id="${fjcfbDto.fjid}" >
												<label for="" class="col-sm-3 control-label" th:if="${fjcfbDtoStat.index == 0}" th:text="附件"></label>
												<label for="" class="col-sm-3 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
												<div class="col-sm-9 padding_t7">
													<label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
													<a title="下载" th:@click.prevent="'xz(\''+${fjcfbDto.wjlj}+'\',\''+${fjcfbDto.wjm}+'\',\''+${fjcfbDto.fjid}+'\');'" >
														<span th:text="${fjcfbDto.wjm}"></span>
														<span class="glyphicon glyphicon glyphicon-save"></span>
													</a>&nbsp;&nbsp;
													<button title="预览" class="f_button" type="button">
														<span  class="glyphicon glyphicon-eye-open" th:@click.prevent="'yl(\''+${fjcfbDto.fjid}+'\',\''+${fjcfbDto.wjm}+'\');'"></span>
													</button>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="clearfix"></div>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane fade " id="xmjdTab" aria-labelledby="profile-tab">
						<input type="hidden" id="listsize"  th:value="${rwrqDtos.size()}"/>
						<table class="tab">
							<thead>
							<tr>
								<th class="width_1">项目阶段</th>
								<th class="width_1">计划开始日期</th>
								<th class="width_1">实际开始日期</th>
								<th class="width_1">计划结束日期</th>
								<th class="width_1">实际结束日期</th>
								<th class="width_1">阶段截止日期</th>
								<th class="width_1">阶段分数</th>
							</tr>
							</thead>
							<tbody>
							<tr th:if="${rwrqDtos!=null && rwrqDtos.size() >0}" th:each="list,stat:${rwrqDtos}">
								<input type="hidden" th:name="'list['+${stat.index}+'].rqid'"  th:value="${list.rqid}"/>
								<td class="width_1" th:text="${list.jdmc}"></td>
								<td class="width_1">
									<input style="width: 80px;" th:name="'list['+${stat.index}+'].jhksrq'" th:id="'jhksrq_'+${stat.index}" th:value="${list.jhksrq}"/>
								</td>
								<td class="width_1" th:text="${list.sjksrq}"></td>
								<td class="width_1">
									<input style="width: 80px;" th:name="'list['+${stat.index}+'].jhjsrq'" th:id="'jhjsrq_'+${stat.index}" th:value="${list.jhjsrq}"/>
								</td>
								<td class="width_1" th:text="${list.sjjsrq}"></td>
								<td class="width_1" th:text="${list.jzrq}"></td>
								<td class="width_1" th:text="${list.jdfs}"></td>
							</tr>
							</tbody>
						</table>
					</div>
					<div role="tabpanel" class="tab-pane fade " id="rwlyTab" aria-labelledby="profile-tab">
						<div>
							<div class="col-sm-12 col-md-12" th:if="${rwlyDtos!=null&&rwlyDtos.size()>0}" th:each="rwlyDto:${rwlyDtos}" style="margin-bottom: 10px;">
								<table>
									<tr>
										<td>
											<span style="font-size:14px;margin-right:10px;" th:text="${rwlyDto.lrsj}"></span>
											<span style="font-size:14px;margin-right:10px" th:text="${rwlyDto.lrryxm}"></span>
											<span style="font-size:14px;font-weight:bold;" th:text="${rwlyDto.lyxx}"></span>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane fade " id="lyTab" aria-labelledby="profile-tab">
						<div class="col-md-12 col-sm-12" style=" border-bottom: 1px solid #CCCCCC;height:30px;line-height: 30px;">
							参与者：
						</div>
						<div class="col-md-12 col-sm-12" style="padding-top:15px;">
							<div class="form-group">
								<div class="col-sm-11 col-md-11" style="line-height: 35px;">
									<a href="javascript:void(0);" onclick="editrwly()" id="rwly_btn" style="display:inline-block;width:100%;;border:1px solid #CCCCCC;border-radius:3px;">
										<span  id="rwlyclick" title="点击编辑"   style="display:inline-block;width:100%;color:#A6A6A6;font-size:12px;padding-left:10px;">点击发表留言</span>
									</a>
									<div id="rwlyDiv" style="display:none;">
					          		<textarea  id="lyxx"  style="height:100px;" name="lyxx"
											   class="form-control" placeholder="请输入任务留言"></textarea>
										<div id="message_div">
											<input  id="message_file" name="message_file" type="file">
										</div>
										<div class="col-md-12" style="padding:0px;">
											<button class="btn btn-default" type="button" style="margin-top:10px;" onclick="cancelrwly()">取消</button>
											<button class="btn btn-info" type="button" style="margin-top:10px" onclick="saverwly()">发表</button>
										</div>
									</div>
								</div>
							</div>
							<div class="col-sm-11 col-md-11" style="margin-bottom: 20px;">
								<a id="showmore"style="font-size:14px;" href="javascript:void(0);" onclick="showmore()"><span class="glyphicon glyphicon-option-horizontal" >&nbsp;显示所有的动态</span></a>
								<a id="showless" style="font-size:14px;display:none;" href="javascript:void(0);" onclick="showless()"><span class="glyphicon glyphicon-option-horizontal" >&nbsp;显示最近的动态</span></a>
							</div>
							<div class="col-sm-11 col-md-11">
								<table id="rwlytable">
								</table>
							</div>
							<div id="fatherDiv" style=" overflow-y:auto; overflow-x:auto; width:100%; height:320px;">
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</body>
</html>
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <script type="text/javascript" src="/js/systemmain/task/bootstrap-tagsinput.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/js/systemmain/task/bootstrap-tagsinput.css" />
    <script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/fileinput.min.css" />
    <style type="text/css">
        .bootstrap-tagsinput {
            min-width:100%;
        }
        .label-info {
            cursor: pointer;
        }
        th{
            font-weight:bold;
            text-align: center;
        }
        #fjcfbDto span:hover{
            cursor:pointer;
        }
        .f_button{
            background: white;
            border: 0;
        }
        .f_button:hover{
            border-width: 0px;
            border-radius: 3px;
            background: #1E90FF;
            cursor: pointer;
            outline: none;
            font-family: Microsoft YaHei;
            color: white;
            font-size: 14px;
        }
        .jdsty{
            padding: 6px 12px;
            text-align: center;
            border: 1px solid transparent;
            border-radius: 4px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }
    </style>
</head>
<body>
<form id="produceAddForm" th:action ="${urlPrefix}+${qgglDto.formAction}" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation">
    <div class="body-content">
        <div class="row">
            <input type="hidden" name="access_token"/>
            <input type="hidden" name="urlPrefix" id ="urlPrefix" th:value="${urlPrefix}">
            <input type="hidden" id="qgmx_json" name="qgmx_json"/>
            <input type="hidden" id="fjids" name="fjids"/>
            <input type="hidden" id="cskz1" name="cskz1" th:value="${mrqgglDto.cskz1}"/>
            <input type="hidden" name="bcbj" id="bcbj" th:value="${qgglDto.bcbj}"/>
            <input type="hidden" name="shlx" th:value="${qgglDto.auditType}" id="shlx">
            <input type="hidden" name="auditType" th:value="${qgglDto.auditType}" id="auditType">
            <input type="hidden" name="qglb" th:value="${qgglDto.qglb}" id="qglb">
            <input type="hidden" name="fwbj" id="fwbj" th:value="${qgglDto.fwbj}">
            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <label for="" class="col-sm-1 col-md-1 col-xs-1 control-label">
                        <span style="color: red;">*</span>需求单号
                    </label>
                    <div class="col-sm-11 col-xs-11 col-md-11">
                        <div class="input-group">
                            <input id="xqdhs" autoComplete="off" style="min-width: 100%;height:32px;" name="xqdhs" type="text" class="form-control" />
                            <span class="input-group-btn">
										<button type="button" onclick="chooseScxx()" class="btn btn-primary"  style="height:32px !important;">新增</button>
									</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;单据号:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <input type="text" id="djh" name="djh" th:value="${qgglDto.djh}" validate="{required:true,stringMaxLength:64}" class="form-control" autocomplete="off"/>
                    </div>
                </div>
            </div>

            <div class="col-md-3 col-sm-3" >
                <div class="form-group" >
                    <label for="" class="col-sm-4 control-label">
                        请购类别:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <span th:text="${qgglDto.qglbmc}" class="form-control"/>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>&nbsp;&nbsp;申请人:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <div class="input-group" >
                            <input id="sqrmc" name="sqrmc" type="text" th:value="${qgglDto.sqrmc}" readonly="readonly" validate="{required:true}"  class="form-control" />
                            <input id="sqr" name="sqr" type="hidden"  th:value="${qgglDto.sqr}" class="form-control" validate="{required:true}"/>
                            <span class="input-group-btn" th:if="${qgglDto.fwbj ==null || qgglDto.fwbj == ''}">
												<button type="button" onclick="chooseSqr()" class="btn btn-primary">选择</button>
											</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>申请部门:
                    </label>
                        <div class="col-sm-8 col-xs-12">
                        <div class="input-group">
                            <input id="sqbmmc" name="sqbmmc" type="text" th:value="${qgglDto.sqbmmc}" readonly="readonly" validate="{required:true}" class="form-control"  />
                            <input id="sqbm" name="sqbm" type="hidden" th:value="${qgglDto.sqbm}" class="form-control" validate="{required:true}"/>
                            <input id="sqbmdm" name="sqbmdm" type="hidden"  th:value="${qgglDto.sqbmdm}"  class="form-control"/>
                            <span class="input-group-btn" th:if="${qgglDto.fwbj ==null || qgglDto.fwbj == ''}">
												<button type="button" onclick="chooseBm()" class="btn btn-primary">选择</button>
											</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>&nbsp;&nbsp;申请日期:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <input type="text" id="sqrq" name="sqrq" th:value="${qgglDto.sqrq}" validate="{required:true,stringMaxLength:64}" class="form-control" autocomplete="off"/>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3" >
                <div class="form-group" >
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>&nbsp;&nbsp;记录编码:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <input type="text" id="jlbh" name="jlbh" th:value="${qgglDto.jlbh}" validate="{required:true,stringMaxLength:64}" class="form-control" autocomplete="off"/>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>项目大类编码:
                    </label>
                    <div class="col-sm-8 col-xs-12" th:if="${xmdlbmlist!=null && xmdlbmlist.size() > 0}">
                        <input id="xmdldm" name="xmdldm" type="hidden">
                        <select id="xmdl" name="xmdl" class="form-control chosen-select" validate="{required:true}" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${xmdlbmlist}" th:id="${list.csid}" th:value="${list.csid}" th:text="${list.csdm}+'--'+${list.csmc}" th:cskz1="${list.cskz1}" th:csdm="${list.csdm}" th:selected="${qgglDto.xmdl eq list.csid}"></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>项目编码:
                    </label>
                    <div class="col-sm-8 col-xs-12" th:if="${xmbmlist!=null && xmbmlist.size() > 0}">
                        <input type="hidden" id="xmbmdm" name="xmbmdm">
                        <input type="hidden" id="xmmc" name="xmmc">
                        <select id="xmbm" name="xmbm" class="form-control chosen-select" validate="{required:true}" style="height:34px;">
                            <option value="">--请选择--</option>
                            <option th:each="list:${xmbmlist}" th:id="${list.csid}" th:value="${list.csid}" th:csmc="${list.csmc}" th:text="${list.csdm}+'--'+${list.csmc}" th:cskz1="${list.cskz1}" th:csdm="${list.csdm}"
                                    th:selected="${qgglDto.xmbm eq list.csid}"></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-3" >
                <div class="form-group">
                    <label for="" class="col-sm-4 control-label">
                        <span style="color: red;">*</span>申请理由:
                    </label>
                    <div class="col-sm-8 col-xs-12">
                        <input type="text" id="sqly" name="sqly" th:value="${qgglDto.sqly}" validate="{required:true,stringMaxLength:512}" class="form-control" style="height:30px;" autocomplete="off"/>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
                        <div th:id="${fjcfbDto.fjid}" >
                            <label for="" class="col-sm-1 control-label" th:if="${fjcfbDtoStat.index == 0}" th:text="附件："></label>
                            <label for="" class="col-sm-1 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
                            <div class="col-sm-11 padding_t7">
                                <label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
                                <button style="outline:none;margin-bottom:5px;padding:0px;" class="btn btn-link" type="button" title="下载" th:onclick="xz([[${fjcfbDto.fjid}]]);" >
                                    <span th:text="${fjcfbDto.wjm}"></span>
                                    <span class="glyphicon glyphicon glyphicon-save"></span>
                                </button>&nbsp;&nbsp;
                                <button title="删除" class="f_button" type="button">
                                    <span class="glyphicon glyphicon-remove" th:onclick="del([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjlj}]]);"></span>
                                </button>&nbsp;&nbsp;
                                <button title="预览" class="f_button" type="button">
                                    <span class="glyphicon glyphicon-eye-open" th:onclick="view([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjm}]]);"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <label for="" class="col-sm-1 col-xs-1 col-md-1 control-label">
                        附件上传：
                    </label>
                    <div class="col-sm-11 col-xs-11 col-md-11" style="line-height:28px;">
                        <a href="javascript:void(0);" onclick="editfile()" id="file_btn" style="display:inline-block;width:100%;;border:1px solid #CCCCCC;border-radius:3px;">
                            <span  id="fileclick" title="点击上传"  style="display:inline-block;width:100%;color:#A6A6A6;font-size:12px;padding-left:10px;">点击展开上传文件</span>
                        </a>
                        <div id="fileDiv" style="display:none;">
                            <input id="pro_file" name="pro_file" type="file">
                            <button class="btn btn-default" type="button" style="margin-left:77%;width:23%;margin-top:10px;" onclick="cancelfile()">隐藏</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12 col-sm-12" >
                <div class="form-group" >
                    <label for="" class="col-sm-1 control-label">
                        备注：
                    </label>
                    <div class="col-sm-11 col-xs-12" >
                        <textarea id="bz" name="bz" rows="3"  style="height:50px;" validate="{stringMaxLength:2048}" class="form-control" th:text="${qgglDto.bz}" autocomplete="off"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 生产明细table -->
    <table id="tb_list" data-classes="table table-hover table-bordered table-hidden" style="width:1650px;margin-left:8px;"></table>
</form>
</body>
<script type="text/javascript" th:src="@{${urlPrefix} + '/js/purchase/purchase/purchase_productionadd.js'}" charset="utf-8"></script>
</html>
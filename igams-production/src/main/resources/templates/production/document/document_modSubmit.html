<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
		<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/fileinput.min.css" />
		<script type="text/javascript" th:src="@{${urlPrefix} + '/js/production/document/document_modSubmit.js'}" charset="utf-8"></script>
		<style type="text/css">
			#sel_unlist,#sel_list{
				height:300px;
				width: 100%;
				overflow: auto;
				border:none;
			}
			#fjcfbDto span:hover{
				cursor:pointer;
			}
		</style>
	</head>
	<body>
	<div id="document_modSubmit">
		<form id="ajaxForm" th:action ="${urlPrefix}+'/production/document/reviseSaveDocumentView'" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation" enctype="multipart/form-data">
			<input type="hidden" name="access_token"/>
			<input type="hidden" name="status" id="status" th:value="${status}"/>
			<input type="hidden" name="message" id="message" th:value="${message}"/>
			<input type="hidden" name="jsids" id="jsids"/>
			<input type="hidden" name="t_jsids" id="t_jsids"/>
			<input type="hidden" name="d_jsids" id="d_jsids"/>
			<input type="hidden" name="ywlx" id ="ywlx" th:value="${wjglDto.ywlx}">
			<input type="hidden" name="fjids" id ="fjids">
			<input type="hidden" name="gwjid" id ="gwjid" th:value="${wjglDto.gwjid}">
			<input type="hidden" name="wjid" id="wjid" th:value="${wjglDto.wjid}"/>
			<input type="hidden" name="urlPrefix" id ="urlPrefix" th:value="${urlPrefix}">
			<input type="hidden" name="glwj_json" id="glwj_json"/>
			<input type="hidden" name="nwjid" id ="nwjid" th:value="${wjglDto.wjid}">
			<input type="hidden" name="sbglwjid" id ="sbglwjid" th:value="${wjglDto.sbglwjid}">
			<input type="hidden" name="wjlbcskz2" id ="wjlbcskz2">
			<div class="body-content">
				<div class="panel panel-default" id="wjglb">
					<div class="panel-heading">
						文件信息
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-md-12 col-sm-12">
					        	<div class="form-group">
					    			<div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
					    				<div th:id="${fjcfbDto.fjid}">
					    					<label for="" class="col-sm-2 control-label" th:if="${fjcfbDtoStat.index == 0}" th:text="原附件"></label>
						    				<label for="" class="col-sm-2 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
						    				<div class="col-sm-10 padding_t7">
						    					<label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
						    					<a th:if="${fjcfbDto.wjmhz != 'pdf'}" title="下载" th:@click.prevent="'xz(\''+${fjcfbDto.fjid}+'\');'" >
							    					<span th:text="${fjcfbDto.wjm}"></span>
							    					<span class="glyphicon glyphicon glyphicon-save"></span>
						    					</a>&nbsp;&nbsp;
						    					<a th:if="${fjcfbDto.wjmhz == 'pdf'}" title="预览" th:@click="'view(\''+${fjcfbDto.fjid}+'\');'" >
							    					<span th:text="${fjcfbDto.wjm}"></span>
						    					</a>
						    				</div>
						    			</div>
					    			</div>
					   			</div>
							</div>
							<div class="col-md-12 col-sm-12">
								<div class="form-group">
									<label for="" class="col-sm-2 col-xs-12 control-label">
										资料上传
									</label>
									<div class="col-sm-9 col-xs-12">
										<input id="doc_file" name="doc_file" type="file">
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-xs-12 control-label">
										文件分类<span style="color: red;">*</span>
									</label>
									<div class="col-sm-7 col-xs-12" th:if="${wjfllist!=null && wjfllist.size() > 0}"> 
										<select id="wjfl" name="wjfl" th:value="${wjglDto.wjfl}" class="form-control chosen-select" validate="{required:true}" style="height:34px;">
											<option value="">--请选择--</option>
		                        			<option th:each="list:${wjfllist}" th:value="${list.csid}" th:text="${list.csdm}+'--'+${list.csmc}" th:cskz1="${list.cskz1}" th:csdm="${list.csdm}" th:selected="${list.csid eq wjglDto.wjfl}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-xs-12 control-label">
										文件类别<span style="color: red;">*</span>
									</label>
									<div class="col-sm-7 col-xs-12"> 
										<select id="wjlb" name="wjlb" th:value="${wjglDto.wjlb}" class="form-control chosen-select" validate="{required:true}" style="height:34px;">
											<option value="">--请选择--</option>
		                        			<option  th:if="${wjlblist!=null && wjlblist.size() > 0}" th:each="list:${wjlblist}" th:value="${list.csid}" th:text="${list.csdm}+'--'+${list.csmc}" th:cskz1="${list.cskz1}" th:cskz2="${list.cskz2}" th:cskz3="${list.cskz3}" th:csdm="${list.csdm}" th:selected="${list.csid eq wjglDto.wjlb}"></option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6" style="height:36px;">
								<div class="form-group">
									<label for="" class="col-sm-4 col-md-4 control-label">
										<span id="glmc" th:text="${wjglDto.wjlbcskz2 =='1'?'关联验证': wjglDto.wjlbcskz2 =='0'?'关联计量':'关联设备'}"></span>
									</label>
									<div class="col-sm-7 col-xs-12 col-md-7">
										<div class="input-group">
											<input id="sbmc" name="sbmc" type="text" th:value="${wjglDto.sbmc}" readonly="readonly" class="form-control" />
											<input id="sbglid" name="sbglid" type="hidden" th:value="${wjglDto.sbglid}"  class="form-control" />
											<input id="sbysid" name="sbysid" type="hidden" th:value="${wjglDto.sbysid}" class="form-control" />
											<span class="input-group-btn">
														<button type="button" onclick="chooseGlxx_xd()" class="btn btn-primary">选择</button>
													</span>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6" style="height:36px;">
								<div class="form-group">
									<label for="" class="col-sm-4 col-md-4 control-label">
										所属单位<span style="color: red;">*</span>
									</label>
									<div class="col-sm-7 col-xs-12 col-md-7">
										<div class="input-group">
											<input id="sqbmmc" name="jgmc" type="text" th:value="${departmentDto.jgmc}" readonly="readonly" class="form-control" />
											<input id="sqbm" name="jgid" type="hidden" th:value="${departmentDto.jgid}" class="form-control" />
											<span class="input-group-btn">
												<button type="button" onclick="chooseBm()" class="btn btn-primary">选择</button>
											</span>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-12 col-sm-12">
								<div class="form-group">
									<label for="" class="col-sm-2 col-xs-12 control-label">
										文件名称<span style="color: red;">*</span>
									</label>
									<div class="col-sm-9 col-xs-12">
										<input type="text" id="wjmc" name="wjmc" th:value="${wjglDto.wjmc}"
												validate="{required:true,stringMaxLength:128}" class="form-control" />
									</div>
								</div>
							</div>
							<div class="col-md-12 col-sm-12">
								<div class="form-group">
									<label for="" class="col-sm-2 col-md-2 control-label">
										受影响文件<span style="color: red;">*</span>
									</label>
									<div class="col-sm-9 col-xs-12 col-md-9">
										<input type="text" id="syxwj" name="syxwj" th:value="${wjglDto.syxwj}"validate="{required:true,stringMaxLength:512}" 
										 class="form-control" />
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-xs-12 control-label">
										生效日期
									</label>
									<div class="col-sm-7 col-xs-12">
										<input type="text" id="sxrq" name="sxrq" th:value="${wjglDto.sxrq}"validate="{stringMaxLength:256}" 
										 class="form-control" />
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-xs-12 control-label">
										文件编号<span style="color: red;">*</span>
									</label>
									<div class="col-sm-7 col-xs-12">
										<input type="text" id="wjbh" name="wjbh" th:value="${wjglDto.wjbh}"validate="{required:true,stringMaxLength:256}" 
										 class="form-control" />
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-xs-12 control-label">
										版本号
									</label>
									<div class="col-sm-7 col-xs-12">
										<input type="text" id="bbh" name="bbh" th:value="${wjglDto.bbh}"validate="{stringMaxLength:256}" 
										 class="form-control" />
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="" class="col-sm-4 col-md-4 control-label">
										更改来源<span style="color: red;">*</span>
									</label>
									<div class="col-sm-7 col-xs-12 col-md-7">
										<input type="text" id="ggly" name="ggly" th:value="${wjglDto.ggly}"validate="{required:true,stringMaxLength:512}" 
										 class="form-control" />
									</div>
								</div>
							</div>
							<div id="kzzd">
								<div class="col-md-6 col-sm-6" th:if="${wjglDto.cskz1mc != '' && wjglDto.cskz1mc != null}">
									<div class="form-group">
										<label for="" class="col-sm-4 col-md-4 control-label" th:text="${wjglDto.cskz1mc}">
										</label>
										<div class="col-sm-7 col-xs-12 col-md-7">
											<input type="text" id="cskz1" name="cskz1" th:value="${wjglDto.cskz1}"validate="{stringMaxLength:32}" 
											 class="form-control" />
										</div>
									</div>
								</div>
								<div class="col-md-6 col-sm-6" th:if="${wjglDto.cskz2mc != '' && wjglDto.cskz2mc != null}">
									<div class="form-group">
										<label for="" class="col-sm-4 col-md-4 control-label" th:text="${wjglDto.cskz2mc}">
										</label>
										<div class="col-sm-7 col-xs-12 col-md-7">
											<input type="text" id="cskz2" name="cskz2" th:value="${wjglDto.cskz2}"validate="{stringMaxLength:32}" 
											 class="form-control" />
										</div>
									</div>
								</div>
								<div class="col-md-6 col-sm-6" th:if="${wjglDto.cskz3mc != '' && wjglDto.cskz3mc != null}">
									<div class="form-group">
										<label for="" class="col-sm-4 col-md-4 control-label" th:text="${wjglDto.cskz3mc}">
										</label>
										<div class="col-sm-7 col-xs-12 col-md-7">
											<input type="text" id="cskz3" name="cskz3" th:value="${wjglDto.cskz3}"validate="{stringMaxLength:32}" 
											 class="form-control" />
										</div>
									</div>
								</div>
							</div>
							<div id="t_kzzd">
							
							</div>
							<div class="col-md-12 col-sm-12">
								<div class="form-group">
									<label for="" class="col-sm-2 col-xs-12 control-label">
										备注
									</label>
									<div class="col-sm-9 col-xs-12"> 
										<textarea id="bz" name="bz" rows="3" th:text="${wjglDto.bz}"
												  validate="{stringMaxLength:512}" class="form-control" ></textarea>
									</div>
								</div>
							</div>
							<div class="col-md-12 col-sm-12">
								<button  type="button" class="btn btn-success" style="margin-left:20px;" onclick="addGlwj()" ><span>关联文件</span></button>
							</div>
							<table id="glwj_list" data-classes="table" style="margin-left:30px;width:900px;"></table>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
				<div class="panel panel-default" id="wjqxb">
					<div class="panel-heading">
						权限信息
					</div>
					<div class="panel-body">
						<div class="row">
		          			<div class="pull-left export-left">
		          				<div>
						         	<select id="sel_unlist" name="sel_unlist" size="10" multiple="multiple" style="height:34px;">
						         		<optgroup label="角色名称">
	                        				<option th:each="t_wjglDto:${t_wjgllist}" th:value="${t_wjglDto.jsid}" th:text="${t_wjglDto.jsmc}" ondblclick="addOption()"></option>
	                        			</optgroup>
									</select>
								</div>
							</div>
							<div class="pull-left export-mid">
								<dl>
									<dd id="right-all" v-on:click="addOption()"></dd>
									<dd id="left-all" class="export-leftico" v-on:click="moveOption()"></dd>
								</dl>
							</div>
							<div class="pull-right export-right">
								<div>
						         	<select id="sel_list" name="sel_list" size="10" multiple="multiple" style="height:34px;">
						         		<optgroup label="角色名称">
	                        				<option th:each="s_wjglDto:${wjgllist}" th:value="${s_wjglDto.jsid}" th:text="${s_wjglDto.jsmc}" ondblclick="moveOption()"></option>
	                        			</optgroup>
									</select>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
		</div>
	</body>
</html>
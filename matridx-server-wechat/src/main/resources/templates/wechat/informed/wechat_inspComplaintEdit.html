<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="referrer" content="never">
    <meta content="webkit" name="renderer"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="Copyright" content="matridx"/>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>
    <title>新增投诉</title>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/phonefileinput.min.css">
    <link rel="stylesheet" href="/js/weui/jquery-weui.min.css">
    <link rel="stylesheet" href="/css/weui.css">
    <style>
        .weui-mask {
            visibility: visible;
        }
        .weui-cell:before {
            left: 0;
        }
        label{
            font-size: 16px;
            font-weight: normal;
            margin-bottom: 0
        }
        .weui-form-preview__label {
            min-width: 1em;
        }
        #sjycInfo .weui-cell__bd{
            padding-left: 20px;
        }
        /**蓝色按钮*/
        .weui-btn_bule,.weui-btn_primary {
            color: white;
            background-color: #00AFEC;
        }
        .weui-btn_bule:not(.weui-btn_disabled):visited,.weui-btn_primary:not(.weui-btn_disabled):visited {
            color: rgba(0, 208, 236, 0.98);
        }
        .weui-btn_bule:not(.weui-btn_disabled):active,.weui-btn_primary:not(.weui-btn_disabled):active {
            background-color: #00e4ec;
        }

        .weui_loading_toast .weui-toast_content{
            font-size: 16px;
        }
        /**单选框、多选框样式*/
        .Radio input,
        .Checkbox input {
            display: none
        }
        .Radio label,
        .Checkbox label {
            padding: 0 3px;
            display: inline-block;
            cursor: pointer;
            position: relative
        }
        .Radio label:before,
        .Checkbox label:before {
            box-sizing: border-box;
            content: "";
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 1px solid #999;
            margin: 0 2px;
            vertical-align: middle;
            display: inline-block;
            transition: 0.1S;
        }
        .Radio input:checked + label:before {
            border: 5px solid #00a4ff;
        }
        .Checkbox label:before {
            background: url(/images/ico_tick.svg) no-repeat center;
            background-size: 0;
            border-radius: 4px;
            transition: 0.2S;
        }
        .Checkbox input:checked + label:before {
            background-color: #00a4ff;
            background-size: 16px;
            border-color: #00a4ff;
        }
        /*选择框样式*/
        .RadioStyle input {
            display: none
        }
        .RadioStyle label {
            border: 2px solid #CCC;
            color: #666;
            padding: 1px 10px 1px 5px;
            line-height: 28px;
            min-width: 40px;
            text-align: center;
            float: left;
            margin: 2px;
            border-radius: 4px
        }
        .RadioStyle input:checked + label {
            background: url(/images/ico_checkon.svg) no-repeat right bottom;
            border: 2px solid #00a4ff;
            background-size: 21px 21px;
            color: #00a4ff
        }
        .RadioStyle input:disabled + label {
            opacity: 0.7;
        }
    </style>
</head>
<body style="background-color: #F5F5F5" data-weui-theme="light">
<form id="complaintInfo">
    <input type="hidden" name="ywid" id="ywid" th:value="${sjycDto.ywid}"/>
    <input type="hidden" name="wxid" id="wxid" th:value="${sjycDto.twr}"/>
    <input type="hidden" name="jcdw" id="jcdw" th:value="${sjxxDto.jcdw}"/>
    <input type="hidden" name="ywlx" id="ywlx" th:value="${ywlx}"/>
    <input type="hidden" name="wbcxdm" id="wbcxdm" th:value="${wbcxdm}"/>
    <input type="hidden" name="ycqf" id="ycqf" th:value="${sjycDto.ycqf}"/>
    <input type="hidden" name="qrlx" id="qrlx" th:value="${qrlx}"/>
    <input type="hidden" name="qrjs" id="qrjs" th:value="${qrjs}"/>
    <input type="hidden" name="fjids" id="fjids" th:value="${fjids}"/>
    <input type="hidden" name="backpage" id="backpage" th:value="${backpage}"/>
    <div id="hzxxInfo" class="page__bd">
        <div class="weui-cells__title" style="display: flex;margin-top: 8px;">
            <div style="flex: 1;">标本信息</div>
        </div>
        <div style="margin: 8px;border-radius: 10px;font-size: 12px">
            <div class="weui-panel" style="border-radius: 10px;">
                <div class="weui-cell__bd" style="border-radius: 10px;transform: translate3d(0px, 0px, 0px);">
                    <div class="weui-form-preview" style="border-radius: 10px;">
                        <div style="height: 0.1rem;"></div>
                        <div class="weui-form-preview__hd weui-media-box_appmsg"
                             style="border-left: 3px solid #00AFEC;margin-bottom: 0;padding: 0.1rem 0.1rem;">
                            <div class="weui-media-box__bd" style="flex: 2">
                                <label class="weui-form-preview__value" style="margin: 0;text-align: left" th:text="${sjxxDto.hzxm}"></label>
                            </div>
                            <div class="weui-media-box__bd" style="flex: 3">
                                <label class="weui-form-preview__value" style="margin: 0;font-size: 15px;text-align: left;line-height: normal;color: rgba(0,0,0,0.5)" th:text="${sjxxDto.fjsrq != null && sjxxDto.fjsrq != '' ?sjxxDto.fjsrq:'暂无接收时间'}"></label>
                            </div>
                            <img th:if="${sjxxDto.sfje == null || sjxxDto.sfje == '' || sjxxDto.sfje == '0.00'}" src="/images/inspectionServices/disPay.png" style="position: absolute;right: 5px;width: 1rem;"/>
                            <img th:if="${sjxxDto.sfje != null && sjxxDto.sfje != '' && sjxxDto.sfje != '0.00' }" src="/images/inspectionServices/payed.png" style="position: absolute;right: 5px;width: 1rem;"/>
                        </div>
                        <div class="weui-form-preview__bd" style="font-size: 14px;font-weight: bolder;padding: 0px 10px">
                            <div th:if="${(sjxxDto.jsrq == null || sjxxDto.jsrq == '') && sjxxDto.sfws == '3'}" style="position: absolute;right: 5px;font-size: 15px;color: #00AFEC">未接收</div>
                            <div th:if="${(sjxxDto.jsrq == null || sjxxDto.jsrq == '') && sjxxDto.sfws != '3'}" style="position: absolute;right: 5px;font-size: 15px;color: #53C31B">待完善</div>
                            <div th:if="${sjxxDto.jsrq != null && sjxxDto.jsrq != '' && sjxxDto.sfws == '3' && (sjxxDto.bgrq == null || sjxxDto.bgrq == '')}" style="position: absolute;right: 5px;font-size: 15px;color: rgb(182,182,182)">未出报告</div>
                            <div th:if="${sjxxDto.jsrq != null && sjxxDto.jsrq != '' && sjxxDto.bgrq != null && sjxxDto.bgrq != '' && ((sjxxDto.sfzq != null && sjxxDto.sfzq != '') || (sjxxDto.lcfk != null && sjxxDto.lcfk != ''))}" style="position: absolute;right: 5px;font-size: 15px;color: #FAAD14">已反馈</div>
                            <div th:if="${sjxxDto.jsrq != null && sjxxDto.jsrq != '' && sjxxDto.bgrq != null && sjxxDto.bgrq != '' && !((sjxxDto.sfzq != null && sjxxDto.sfzq != '') || (sjxxDto.lcfk != null && sjxxDto.lcfk != ''))}" style="position: absolute;right: 5px;font-size: 15px;color: #FF4D4F">未反馈</div>
                            <div style="display: flex">
                                <div class="weui-form-preview__item" style="flex: 4">
                                    <label class="" style="float: left;margin-right: 2px;">编号：</label>
                                    <label class="weui-form-preview__value" style="font-weight: bold;text-align: left;word-break: keep-all;overflow: hidden;white-space: nowrap;text-overflow:ellipsis;" th:text="${sjxxDto.ybbh}"></label>
                                </div>
                                <div class="weui-form-preview__item" style="flex: 4">
                                    <label class="" style="float: left;margin-right: 2px;">金额：</label>
                                    <label class="weui-form-preview__value" style="font-weight: bold;text-align: left;word-break: keep-all;overflow: hidden;white-space: nowrap;text-overflow:ellipsis;" th:text="${sjxxDto.sfje}"></label>
                                </div>
                            </div>
                            <div style="display: flex">
                                <div class="weui-form-preview__item" style="flex: 3">
                                    <label class="" style="float: left;margin-right: 2px;">类型：</label>
                                    <label class="weui-form-preview__value" style="font-weight: bold;text-align: left;word-break: keep-all;overflow: hidden;white-space: nowrap;text-overflow:ellipsis;" th:text="${sjxxDto.yblxmc != null && sjxxDto.yblxmc != ''?sjxxDto.yblxmc:''}"></label>
                                </div>
                                <div class="weui-form-preview__item" style="flex: 4">
                                    <label class="" style="float: left;margin-right: 2px;">单位：</label>
                                    <label class="weui-form-preview__value" style="font-weight: bold;text-align: left;word-break: keep-all;overflow: hidden;white-space: nowrap;text-overflow:ellipsis;" th:text="${sjxxDto.sjdwbj == '1'? (sjxxDto.sjdwmc != null && sjxxDto.sjdwmc != ''?sjxxDto.sjdwmc:''):(sjxxDto.sjdwjc != null && sjxxDto.sjdwjc != ''?sjxxDto.sjdwjc:(sjxxDto.sjdwmc != null && sjxxDto.sjdwmc != ''?sjxxDto.sjdwmc:''))}"></label>
                                </div>
                            </div>
                        </div>
                        <div style="height: 0.1rem;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sjycInfo" class="page__bd" style="margin-bottom: 120px;">
        <div class="weui-cells__title" style="display: flex;margin-top: 8px;">
            <div style="flex: 1;">投诉信息</div>
            <div style="flex: 1;text-align: right;height: 30px">
                <button id="complaintHistory" type="button" class="weui-btn weui-btn_mini weui-btn_bule" style="height: 100%;font-size: smaller;" th:text="${'历史提交　'+ count}"></button>
            </div>
        </div>
        <div style="margin: 8px;border-radius: 10px;">
            <div class="weui-cells weui-cells_form" style="border-radius: 10px;margin: 0;margin-top: 10px;">
                <!--投诉标题-->
                <div class="weui-cell">
                    <div class="weui-cell__hd">
                        <label>标　　题　<span style="color:red;">*</span></label>
                    </div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" id="ycbt" name="ycbt" th:value="${(sjycDto.ycbt != null && sjycDto.ycbt != '') ? sjycDto.ycbt : ((sjxxDto.hzxm != null && sjxxDto.hzxm != '' ? sjxxDto.hzxm : '无')  + '-' + (sjxxDto.yblxmc != null && sjxxDto.yblxmc != '' ? sjxxDto.yblxmc : '无') + '-' + (sjxxDto.db != null && sjxxDto.db != '' ? sjxxDto.db : '无') ) }" placeholder="请填写投诉标题"/>
                    </div>
                </div>
                <!--投诉类型-->
                <div class="weui-cell weui-cell_access">
                    <div class="weui-cell__hd">
                        <label>投诉类型　<span style="color:red;">*</span></label>
                    </div>
                    <div class="weui-cell__bd" onclick="chooseYclx()">
                        <input class="weui-input" id="lxmc" name="lxmc" th:value="${sjycDto.lxmc}" placeholder="请选择投诉类型" readonly>
                        <input type="hidden" id="lx" name="lx" th:value="${sjxxDto.lx}" readonly/>
                    </div>
                    <div class="weui-cell__ft"></div>
                </div>
                <!--投诉子类型-->
                <div id="yczlxDiv" class="weui-cell weui-cell_access">
                    <div class="weui-cell__hd">
                        <label>投诉子类型<span style="color:red;">*</span></label>
                    </div>
                    <div class="weui-cell__bd" onclick="chooseYczlx()">
                        <input class="weui-input" id="zlxmc" name="zlxmc" th:value="${sjycDto.zlxmc}" placeholder="请选择投诉子类型" readonly>
                        <input type="hidden" id="zlx" name="zlx" th:value="${sjycDto.zlx}" readonly/>
                    </div>
                    <div class="weui-cell__ft"></div>
                </div>
                <div class="weui-cell" style="align-items: flex-start;">
                    <div class="weui-cell__hd">
                        <label>异常类型<span style="color:red;">*</span></label>
                    </div>
                    <div class="weui-cell__bd">
						<span class="RadioStyle" th:each="pathogeny,stat:${yctslx_list}" th:if="${pathogeny.csmc.length<7}">
							<input type="checkbox" th:id="${pathogeny.csid}" name="bys" th:value="${pathogeny.csid}" th:checked="${sjxxDto.bys!=null &&sjxxDto.bys.contains(pathogeny.csid)?true:false}"/>
							<label th:style="${'font-size: small;width:'+(pathogeny.csmc.length>6?'98%':'48%')}" th:for="${pathogeny.csid}" th:text="${pathogeny.csmc}"></label>
						</span>
                        <span class="RadioStyle" th:each="pathogeny,stat:${yctslx_list}" th:if="${pathogeny.csmc.length>6}">
							<input type="checkbox" th:id="${pathogeny.csid}" name="bys" th:value="${pathogeny.csid}" th:checked="${sjxxDto.bys!=null &&sjxxDto.bys.contains(pathogeny.csid)?true:false}"/>
							<label th:style="${'font-size: small;width:'+(pathogeny.csmc.length>6?'98%':'48%')}" th:for="${pathogeny.csid}" th:text="${pathogeny.csmc}"></label>
						</span>
                    </div>
                </div>
                <!--内容-->
                <div class="weui-cell" style="align-items: flex-start;">
                    <div class="weui-cell__hd">
                        <label>内　　容　<span style="color:red;">*</span></label>
                    </div>
                    <div class="weui-cell__bd">
                        <textarea class="weui-textarea" style="background-color: #F3F3F3;" id="ycxx" name="ycxx" th:text="${sjycDto.ycxx}" validate="{stringMaxLength:512}" placeholder="请填写内容" rows="3"></textarea>
                    </div>
                </div>
                <!--附件-->
                <div class="weui-cell weui-cell_access">
                    <div class="weui-cell__hd">
                        <div  class="weui-cell__hd">
                            <label>附件上传　</label>
                        </div>
                    </div>
                    <div class="weui-cell__bd">
                        <div style="display:none" id="chrom">
                            <div id="fileDiv">
                                <input type="file" id="wechat_file" name="wechat_file" />
                            </div>
                        </div>
                        <div class="weui-cell__bd" style="display: flex;padding: 0" id="phone" >
                            <div style="padding:0;width: 30%;margin: 0 5px;" id="uploader">
                                <div style="padding:0;border:1px solid #ccc;">
                                    <img width="100%" height="100%" src="/images/add.png">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="weui-cells weui-cells_form" style="width: 90%;position: fixed;border-radius: 50px;margin: 5px 5%;bottom: 55px;z-index: 999;">
        <a class="weui-btn weui-btn_bule" style="text-decoration: none;width: 100%;" id="save" onclick="sjycSave()">保存</a>
    </div>
    <div class="weui-cells weui-cells_form" style="width: 90%;position: fixed;border-radius: 50px;margin: 5px 5%;bottom: 0;z-index: 999;">
        <a class="weui-btn weui-btn_default" style="text-decoration: none;width: 100%;border: 1px solid #00AFEC;color: #00AFEC;border-radius: 50px;" id="back" onclick="back()">取消</a>
    </div>
</form>
<script type="text/javascript" src="/js/jquery-3.6.1.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/weui/jquery-weui.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/weui/weui.js"></script>
<script type="text/javascript" src="/js/jquery-qrcode.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/wechat/flexible.js" charset="utf-8"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/wechat/informed/wechat_inspComplaintEdit.js?v=20230720"></script>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.matridx.igams.experiment.dao.post.IZdhYhxxDao">
    <select id="getDto" resultType="ZdhYhxxDto" parameterType="ZdhYhxxDto">
        SELECT yhid, wechatid, jcsjid, zt, yhm, mm
        FROM igams_zdh_yhxx
        WHERE wechatid = #{wechatid} or yhid = #{yhid}
          and scbj = '0'
    </select>

    <insert id="insertDto" parameterType="ZdhYhxxDto">
        insert into igams_zdh_yhxx(yhid, wechatid, jcsjid, zt, lrsj, lrry, scbj)
        values (#{yhid}, #{wechatid}, #{jcsjid}, #{zt}, LOCALTIMESTAMP, #{wechatid}, #{scbj})
    </insert>
    <update id="updateDto" parameterType="ZdhYhxxDto">
        update igams_zdh_yhxx
        <set>
            <if test="zt !=null and zt !=''">
                zt=#{zt},
            </if>
            <if test="yhm !=null and yhm !=''">
                yhm=#{yhm},
            </if>
            <if test="mm !=null and mm !=''">
                mm=#{mm},
            </if>
            <if test="xgry !=null and xgry !=''">
                xgry=#{xgry},
            </if>
            xgsj = LOCALTIMESTAMP
        </set>
        <where>
            yhid=#{yhid}
        </where>
    </update>
</mapper>
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script type="text/javascript" src="/js/experiment/library/library_add.js?v=2025081201" charset="utf-8"></script>
	<style type="text/css">
		.li{
			margin-bottom:15px ! important;
			padding-top: 7px;
			text-align: left;
		}
		.liem{
			padding-left:0px;
		}
		.liek{
			padding-left:0px;
			padding-right:0px;
		}
		.liek input{
			padding:6px 3px;
		}
		.lietq{
			padding-left: 2px;
			padding-right: 0px;
		}

		input[type='text'] {
			font-size:12px;
		}
		.bootstrap-switch-container{
		height:28px !important;
		}
	</style>
	<script type="text/javascript" th:inline="javascript">
		var tqmxDtoList=[[${wklist}]];
		var pxzd='kzcs1'
	</script>
</head>
<body>
<form id="ajaxForm" th:action="'/experiment/library/'+${wkmxDto.formAction}"  class="form-horizontal sl_all_form"  method="post" theme="simple" data-bs-toggle="validation">
	<input type="hidden" name="access_token"/>
	<input type="hidden" id="jtxxs" name="jtxxs">
	<input type="hidden" id="nbbhs" name="nbbhs">
	<input type="hidden" id="xhs" name="xhs">
	<input type="hidden" id="tqms" name="tqms">
	<input type="hidden" id="syglids" name="syglids">
	<input type="hidden" id="tqmxids" name="tqmxids">
	<input type="hidden" id="quantitys" name="quantitys">
	<input type="hidden" id="check_str" name="check_str">
	<input type="hidden" id="sfbc" name="sfbc">
	<input type="hidden" id="zt_flag" name="zt_flag">
	<input type="hidden" id="sygl_json" name="sygl_json">
	<input type="hidden" id="wkmx_json" name="wkmx_json" th:value="${wkmxDto.wkmx_json}">
	<input type="hidden" id="sjxzJson" name="sjxzJson" th:value="${sjxzJson}">
	<input type="hidden" id="wkid" name="wkid" th:value="${wkmxDto.wkid}">
	<input type="hidden" id="ids" name="ids" th:value="${ids}">
	<input type="hidden" id="sj1" name="sj1" th:value="${wkmxDto.sjph1}">
	<input type="hidden" id="sj2" name="sj2" th:value="${wkmxDto.sjph2}">
	<input type="hidden" id="format" name="format" th:value="${wkmxDto.formAction}">
	<input type="hidden" id="poolingCoefficient" name="poolingCoefficient" th:value="${poolingCoefficient}">
	<input type="hidden" id="isOverFlow" name="isOverFlow" >
	<input type="hidden" id="zdpb" name="zdpb"  th:value="${zdpb}">
	<input type="hidden" id="sfjyh" name="sfjyh"  th:value="${sfjyh}">
	<input type="hidden" id="sj3" name="sj3" th:value="${wkglDto.sjph3}"/>
	<input type="hidden" id="yqlxValue" name="yqlxValue" th:value="${{wkmxDto.yqlx != null?wkmxDto.yqlx:mryqlx.csid}}"/>
	<div class="body-content tab-content" style="height:500px;">
		<div class="col-sm-12 col-md-12 col-xs-12  panel-default" >
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"><span style="color:red;">*</span>文库名称</label>
					<div class="col-sm-6 col-md-8 col-xs-8">
						<input type="text" id="wkmc" name="wkmc" th:value="${wkglDto.wkmc}" validate="{required:true,stringMaxLength:64}" class="form-control" style="height:30px;"/>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label for="" class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0">
						<span style="color: red;">*</span>检测单位
					</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<select id="jcdw" name="jcdw"   th:value="${{mrjcdw != null?mrjcdw.csid:wkmxDto.jcdw}}" class="form-control chosen-select" validate="{required:true}" onchange="changeJcdw()">
							<option  value="">--请选择--</option>
							<option  th:if="${jcdwList!=null && jcdwList.size() > 0}" th:each="list:${jcdwList}" th:value="${list.csid}"  th:text="${list.csmc}" th:selected="${{mrjcdw != null?mrjcdw.csid eq list.csid:wkmxDto.jcdw eq list.csid}}"></option>
						</select>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"><span style="color:red;">*</span>文库日期</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="wkrq" name="wkrq" th:value="${wkglDto.wkrq}" validate="{required:true,stringMaxLength:64}" class="form-control" style="height:30px;"/>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0">逆转录试剂</label>
					<div class="col-sm-8 col-md-8 col-xs-8" th:if="${sjxsbj2=='0'}">
						<input type="text" id="sjph2" name="sjph2" th:value="${wkglDto.sjph2}" validate="{stringMaxLength:512}" class="form-control" style="height:30px;"/>
					</div>
					<div class="col-sm-8 col-md-8 col-xs-8" th:if="${sjxsbj2=='1'}">
						<input type="text" id="sjph2" name="sjph2" th:placeholder="${wkglDto.sjph2}" validate="{stringMaxLength:512}" class="form-control" style="height:30px;" onclick="sjphlr2()"/>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"><span style="color: red;margin-top:10px;">*</span>DNA试剂</label>
					<div class="col-sm-8 col-md-8 col-xs-8" th:if="${sjxsbj1=='0'}">
						<input type="text" id="sjph1" name="sjph1" th:value="${wkglDto.sjph1}" validate="{required:true,stringMaxLength:512}" class="form-control" style="height:30px;"/>
					</div>
					<div class="col-sm-8 col-md-8 col-xs-8" th:if="${sjxsbj1=='1'}">
						<input type="text" id="sjph1" name="sjph1" th:placeholder="${wkglDto.sjph1}" validate="{required:true,stringMaxLength:512}" class="form-control" style="height:30px;" onclick="sjphlr1()"/>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0">默认后缀</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="mrhz" name="mrhz"  class="form-control" style="height:30px;" placeholder="DNA/RNA"/>
					</div>
				</div>
			</div>
			<div class=" col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"></span>标本检查</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="bbjc" name="bbjc" placeholder="请输入内部编码"  onblur="checkBb(this)" class="form-control" style="height:30px;font-size:14px;" />
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label for="" class="col-sm-4 col-sm-4 col-xs-4 control-label" style="padding: 0"><span style="color:red;" ></span>替换开关</label>
					<div class="col-sm-8 col-md-8 col-xs-8" style="height:30px;">
						<input type="checkbox" id="checkbox" name="checkbox" style="height:30px;font-size:14px;" class="form-control"/>
					</div>
				</div>
			</div>

			<div class="col-md-3 col-sm-3 col-xs-12 text-center" th:if="${wkmxDto.formAction=='addSaveLibrary'}">
				<div class="form-group">
					<label  class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0">自动排版</label>
					<div class="col-sm-6 col-md-6 col-xs-6" style="text-align:left">
						<input type="checkbox" id="zdpbCheck" name="zdpbCheck" style="height:30px;font-size:14px;" class="form-control"/>
					</div>
					<div class="col-sm-2 col-md-2 col-xs-2 control-label" style="text-align:left">
						<span class="glyphicon glyphicon-question-sign" style="color:#337ab7;font-size:17px;" data-bs-toggle="tooltip" data-placement="top" title="若启用自动排版，默认将当天已做提取的标本按检测类型(比如-DNA,-RNA)进行自动排版。注意:可能根据该实验室10天内的提取情况，若发现该时间内没有提取信息，则默认该实验室不进行提取流程，则当自动排版启用时也会将标本进行文库自动排版"></span>
					</div>
				</div>
			</div>
			<div class=" col-md-3 col-sm-3 col-xs-12 text-center" style="" th:if="${wkmxDto.formAction=='addSaveLibrary'}" id="divbhhz">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"></span>排版后缀</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="zdpbin" name="zdpbin" th:value="${grszxx_lib_in}" placeholder="后缀名,用半角逗号隔开" onblur="filter()" class="form-control" style="height:30px;font-size:14px;" />
					</div>
				</div>
			</div>
			<div class=" col-md-3 col-sm-3 col-xs-12 text-center" style=""  th:if="${wkmxDto.formAction=='addSaveLibrary'}" id="divbbhhz">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"></span>排版排除后缀</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="zdpbnotin" name="zdpbnotin" placeholder="后缀名,用半角逗号隔开" th:value="${grszxx_lib_notin}" onblur="filter()" class="form-control" style="height:30px;font-size:14px;" />
					</div>
				</div>
			</div>

			<div class="col-md-3 col-sm-3 col-xs-12 text-center" id="checkDiv" style="display:none;">
				<div class="form-group">
					<label class="col-sm-4 control-label" style="padding: 0"><span style="color: red;"></span>替换：</label>
					<div class="col-sm-5 col-md-5 col-xs-5" >
						<input type="text" id="th_value" name="th_value" validate="{stringMaxLength:32}" value="tNGS" class="form-control" style="height:30px;"/>

					</div>
					<div class="col-sm-3 col-md-3 col-xs-3" >
						<button type="button" class="btn btn-primary btn-sm" id="th_button" onclick="replace()">替换</button>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-md-12 col-xs-12  panel-default" id="wksjDiv">
			<div class="col-md-3 col-sm-3 col-xs-3 text-center" th:each="item:${wksjList}">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0" th:text="${item.title}"><span style="color: red;" >*</span></label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" th:id="${item.variable}" th:name="${item.variable}" th:value="${item.value}" class="form-control" style="height:30px;"/>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-md-12 col-xs-12 panel-default">
			<div class="col-md-3 col-sm-3 col-xs-3 text-center">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"><span style="color: red;">*</span>文库定量试剂</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<input type="text" id="sjph3" name="sjph3" th:placeholder="${xsbj=='1'?wkglDto.sjph3:''}" th:value="${xsbj=='0'?wkglDto.sjph3:''}" validate="{required:true,stringMaxLength:32}" class="form-control" style="height:30px;" onclick="sjphlr3()"/>
					</div>
				</div>
			</div>
			<div class="col-md-6 col-sm-6 col-xs-12 text-center">
				<div class="form-group">
					<label for="" class="col-md-2 col-sm-4 col-xs-2 control-label" style="padding: 0">
						<span style="color: red;">*</span>测序仪
					</label>
					<div class="col-sm-10 col-md-10 col-xs-10">
						<select id="yqlx" name="yqlx" th:value="${{wkmxDto.yqlx!=null&&wkmxDto.yqlx!=''?wkmxDto.yqlx:mryqlx.csid}}" class="form-control chosen-select">
						</select>
					</div>
				</div>
			</div>
			<div class="col-md-3 col-sm-3 col-xs-12 text-center">
				<div class="form-group">
					<label for="" class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0">
						<span style="color: red;">*</span>试剂选择
					</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<select id="sjxz" name="sjxz" th:value="${{mrsjxz != null?mrsjxz.csid:wkmxDto.sjxz}}" class="form-control chosen-select" validate="{required:true}" >
							<option  value="">--请选择--</option>
							<option  th:if="${sjxzList!=null && sjxzList.size() > 0}" th:each="list:${sjxzList}" th:value="${list.csid}" th:text="${list.csmc}" th:selected="${{wkmxDto.sjxz !=null ? wkmxDto.sjxz eq list.csid:(mrsjxz !=null && mrsjxz.csid != null ? mrsjxz.csid eq list.csid:'1' eq list.sfmr)}}"></option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-md-12 col-xs-12 panel-default">
			<div class=" col-md-3 col-sm-3 col-xs-12 text-center" style="" th:if="${wkmxDto.formAction=='modSaveLibrary'}">
				<div class="form-group">
					<label class="col-md-4 col-sm-4 col-xs-4 control-label" style="padding: 0"></span>打印文库：</label>
					<div class="col-sm-8 col-md-8 col-xs-8">
						<button  type="button" id="dywk" class="form-control" style="height:30px;font-size:14px;" onclick="printWk(this)">打印文库</button>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-12 col-sm-12 col-xs-12">
			<div class="col-sm-6 col-md-6 col-xs-12">
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:#FFB6C1;width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-HS</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:#F5DA81;width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-RNA</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:#CEF6CE;width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-DNA</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:rgba(113,214,255,1);width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-tNGS</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:#ea88e9;width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-tNGSA</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:rgba(114,125,255,1);width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-TBtNGS</span></div>
				</div>
				<div class="col-sm-2 col-md-2 col-xs-2" style="padding:0px;">
					<div class="col-sm-5 col-md-5 col-xs-5" style="background-color:#b6a2de;width:20px;height:10px;margin-top:5px;padding:0px;"></div>
					<div class="col-sm-7 col-md-7 col-xs-7" style="padding:0px;"><span style="font-size:8px;padding:0px;">-REM</span></div>
				</div>
			</div>
		</div>
		<div class="row wkmxxx" th:each="i:${#numbers.sequence(0, 5)}">
			<div th:id="${'ywl'+(i+1)}" class="col-md-1 col-sm-1" th:if="${i==0||i==2||i==4}">
				<ul >
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">&nbsp;</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">A</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">B</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">C</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">D</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">E</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">F</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">G</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">H</li>
				</ul>
			</div>
			<div th:id="${'ywl'+(i+1)}" class="col-md-1 col-sm-1" th:if="${i==1||i==3||i==5}">
				<ul>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">&nbsp;</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">I</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">J</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">K</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">L</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">M</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">N</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">O</li>
					<li style="height:30px;margin-bottom:10px;line-height:30px;vertical-align: middle;">P</li>
				</ul>
			</div>
			<div class="col-md-11 col-sm-11 col-xs-12" style="margin-top:10px;" >
				<div class="col-md-3 col-sm-3" th:each="x:${#numbers.sequence(0, 3)}">
					<div class="form-group">
						<label for="" style="text-align:left;padding-left: 0" class="col-sm-2 control-label"  th:id="${'li'+(x+1+(4*i))}" th:text="${'列'+(x+1+(4*i))}"></label>
						<label style="display: none;" for=""  class="col-sm-2 control-label" th:id="${'check'+(x+1+(4*i))}"><input th:id="${(x+1+(4*i))}" type="checkbox" name="1" onclick="checkAllBox(this)"></label>
						<div class="col-sm-5 col-md-5 col-xs-12" style="padding-left:0px;">
							<button type="button" class="btn btn-primary btn-sm" th:id="${'lie'+(x+1+(4*i))}"  onclick="addconnect(this)">添加接头</button>
						</div>
						<label for="" style="text-align:left;padding-left: 0" class="col-sm-5 col-md-5 control-label">提取编号-浓度</label>
					</div>
					<div class="form-group" th:each="y:${#numbers.sequence(0, 7)}">
						<label for="" class="col-sm-1 col-xs-1 control-label liem lie1" th:id="${'lie'+(x+1+(4*i))+'-'+(y+1)}"  onclick="modJtxx(this)"></label>
						<label style="display: none" for="" class="col-sm-1 col-xs-1" th:id="${'check'+(x+1+(4*i))+'-'+(y+1)}" ><input th:id="${(x+1+(4*i))+'-'+(y+1)}" type="checkbox" name="1-1" onclick="checkBox(this)"></label>
						<div class="col-sm-5 col-md-5 col-xs-5 liek">
							<input type="text" th:id="${'nbbh'+(x+1+(4*i))+'-'+(y+1)}" th:xh="${(y+1+(8*x)+(32*i))}" name="nbbh"   validate="{stringMaxLength:64}" class="form-control" style="height:30px;" autocomplete="off"/>
							<input type="hidden" th:id="${'quantity'+(x+1+(4*i))+'-'+(y+1)}" name="quantity">
							<input type="hidden" th:id="${'tqm'+(x+1+(4*i))+'-'+(y+1)}" name="tqm">
							<input type="hidden" th:id="${'id'+(x+1+(4*i))+'-'+(y+1)}" name="id">
						</div>
						<div class="col-sm-5 ol-md-5 col-xs-5 lietq">
							<select  th:id="${'tqmx'+(x+1+(4*i))+'-'+(y+1)}" th:name="${'tqmx'+(x+1+(4*i))+'-'+(y+1)}" class="form-control chosen-select" >
								<option  value="">--请选择--</option>
							</select>
						</div>
						<div class="col-sm-1 col-md-1 col-xs-1  liek">
							<img src="/images/error/success.png" hidden th:id="${'success-'+(y+1+(8*x)+(32*i))}"  style="width: 28px;height: 28px">
							<img src="/images/error/error.png" hidden th:id="${'error-'+(y+1+(8*x)+(32*i))}"  style="width: 28px;height: 28px">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</form>
</body>
</html>
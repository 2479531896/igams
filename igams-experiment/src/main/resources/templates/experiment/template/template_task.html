<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>新建任务</title>
	<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/fileinput.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="/js/plugins/bootstrap-fileinput/zh.js" charset="utf-8"></script>
	<link rel="stylesheet" type="text/css" href="/js/plugins/bootstrap-fileinput/fileinput.min.css" />
	<script type="text/javascript"  src="/js/experiment/template/template_task.js"></script>
	<style>
		a{
			text-decoration: none;
		}
		a:hover{
			text-decoration: none;
		}
		#fjcfbDto span:hover{
			cursor:pointer;
		}
		.f_button{
			background: white;
			border: 0;
		}
		.f_button:hover{
			border-width: 0px; 
				border-radius: 3px;
				background: #1E90FF;
				cursor: pointer; 
				outline: none;
				font-family: Microsoft YaHei; 
				color: white; 
				font-size: 14px; 
		}
	</style>
</head>
<body>
	<form id="taskForm"  th:action="'/experiment/template/'+${rwmbDto.formAction}" class="form-horizontal sl_all_form" method="post" theme="simple" data-bs-toggle="validation">
			<input type="hidden" id="token" name="access_token"/>
			<input type="hidden" name="jdid" th:value="${rwmbDto.jdid}">
			<input type="hidden" name="mbid" th:value="${rwmbDto.mbid}">
			<input type="hidden" name="rwmbid" th:value="${rwmbDto.rwmbid}">
			<input type="hidden" id="ywlx" name="ywlx" th:value="${rwmbDto.ywlx}">
			<input type="hidden" name="fjids" id ="fjids">
		<div class="body-content">
			<div class="row">
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>任务名称</label>      	
			          	<div class="col-sm-8">
			          		<input type="text" id="rwmc" th:value="${rwmbDto.rwmc}" name="rwmc"  data-clear="true"
												validate="{required:true}" class="form-control" />
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>负&nbsp;&nbsp;责&nbsp;人</label>      	
			          	<div class="col-sm-8">
			          		<div class="input-group">
			          			<input type="text" id="fzrmc" name="fzrmc" th:value="${rwmbDto.fzrmc}" data-clear="true" validate="{required:true}" class="form-control" data-provide="typeahead" data-items="5" readonly="readonly" />
								<a href="javascript:void(0)" class="input-group-addon" id="selectMrfzr">选择</a> 
							</div>
								<input type="hidden" id="mrfzr" th:value="${rwmbDto.mrfzr}" name="mrfzr"  />
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>期&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;限</label>      	
			          	<div class="col-sm-8">
			          		<div class="input-group">
			          			<input type="text" id="qx" name="qx" th:value="${rwmbDto.qx}"  data-clear="true" validate="{required:true,stringMaxLength:32}" class="form-control" />
			          			<span  class="input-group-addon" >&nbsp;天&nbsp;&nbsp;</span>
			          		</div>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务级别</label>      	
			          	<div class="col-sm-8">
							<select  id="rwjb" name="rwjb" th:value="${rwmbDto.rwjb}"  class="form-control chosen-select"  >
								<option value="">--请选择--</option>
								<option th:if="${task_rank !=null &&task_rank.size()>0}" th:each="rank:${task_rank}" th:value="${rank.csid}" th:text="${rank.csmc}" th:selected="${rwmbDto.rwjb eq rank.csid}"></option>
							</select>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务标签</label>      	
			          	<div class="col-sm-8">
			          		<select  id="rwbq" name="rwbq" th:value="${rwmbDto.rwbq}"  class="form-control chosen-select" >
								<option value="">--请选择--</option>
								<option th:if="${task_label !=null &&task_label.size()>0}" th:each="label:${task_label}" th:value="${label.csid}" th:text="${label.csmc}" th:selected="${rwmbDto.rwbq eq label.csid}"></option>
							</select>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务描述</label>      	
			          	<div class="col-sm-8">
			          		<textarea id="rwms" name="rwms" rows="3" th:text="${rwmbDto.rwms}" style="height:70px;" validate="{stringMaxLength:1024}" class="form-control" ></textarea>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">扩展参数</label>      	
			          	<div class="col-sm-8">
			          		<input type="text" id="kzcs" name="kzcs" th:value="${rwmbDto.kzcs}" data-clear="true"
												validate="{stringMaxLength:32}" class="form-control" placeholder="扩展参数，如果没有可以不必填写"/>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
		        	<div class="form-group">
		    			<div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
		    				<div th:id="${fjcfbDto.fjid}" >
		    					<label for="" class="col-sm-3 control-label" th:if="${fjcfbDtoStat.index == 0}" th:text="附件"></label>
		    					<label for="" class="col-sm-3 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
			    				<div class="col-sm-8 padding_t7">
			    					<label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
			    					<button style="outline:none;margin-bottom:5px;padding:0px;" class="btn btn-link" type="button" title="下载" th:onclick="xz([[${fjcfbDto.fjid}]]);" >
				    					<span th:text="${fjcfbDto.wjm}"></span>
				    					<span class="glyphicon glyphicon glyphicon-save"></span>
			    					</button>&nbsp;&nbsp;
			    					<button title="删除" class="f_button" type="button">
			    						<span class="glyphicon glyphicon-remove" th:onclick="del([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjlj}]]);"></span>
			    					</button>&nbsp;&nbsp;
			    					<button title="预览" class="f_button" type="button">
			    						<span th:if="${fjcfbDto.wjmhz =='pdf'}" class="glyphicon glyphicon-eye-open" th:onclick="view([[${fjcfbDto.fjid}]]);"></span>
			    					</button>
			    				</div>
			    			</div>
		    			</div>
		   			</div>
				</div>
				<div class="col-md-12 col-sm-12">
					<div class="form-group">
						<label for="" class="col-sm-3 col-xs-3 col-md-3 control-label">
							附件上传
						</label>
						<div class="col-sm-8 col-xs-8 col-md-8" style="line-height:28px;">
							<a href="javascript:void(0);" onclick="editfile()" id="file_btn" style="display:inline-block;width:100%;;border:1px solid #CCCCCC;border-radius:3px;">
		            			<span  id="fileclick" title="点击上传"  style="display:inline-block;width:100%;color:#A6A6A6;font-size:12px;padding-left:10px;">点击展开上传文件</span>
		            		</a>
		            		<div id="fileDiv" style="display:none;">
								<input id="tem_file" name="tem_file" type="file">
								<button class="btn btn-default" type="button" style="margin-left:77%;width:23%;margin-top:10px;" onclick="cancelfile()">隐藏</button>
							</div>
						</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script src="/js/plugins/dragsort/jquery.dragsort.js"></script>
	<script type="text/javascript" src="/js/experiment/template/template_stage.js"></script>
	<style type="text/css">
		ul{
			padding:0px;
		}
		.style_1{
			width:30%;
			background-color:#F5F5F5;
			outline:none; 
			border:0;"
		}
		.style_2{
		}
		#qtcz:hove{
			background-color: #000;
		}
		#mytable tr td:hover{
		background-color: #F8F8FF;
		color:#000;
		border:1px solid #FFFFFF;
		}
		.sortable{
			list-style-type: none; 
			margin: 0; 
			padding: 0; 
			width: auto; 
		}
  		.sortable > div { 
  			margin: 5px; 
  			padding: 1px; 
  			float: left; 
  			width: 300px; 
  			height: auto;
  			text-align: center; 
  		}
	</style>
</head>
<body>
	<div class="panel panel-default divxscroll" style="height:100%;">
		<form id="ajaxForm"  method="post" style="height:100%;margin:0px;">  
			<input type="hidden" id="token" name="access_token"/>
			<input type="hidden" id="mbid" name="mbid" th:value="${mbglDto.mbid}">
			<div id="stage" class="body-content">
			<input type="hidden" id="size" th:value="${jdmblist.size()}"/>
			<div class="sortable" style="display:inline-block;height:100%;">
				<div class="col-md-3 col-xs-12" th:id="${jdmb.jdid}" style="height:100%;" th:each="jdmb:${jdmblist}">
					<div class="form-group" style="height:100%;margin:0px;">
						<div class="panel panel-default" style="height:100%;">
							<div class="panel-heading" style="height:35px;">
								<!-- <span th:text="${jdmb.jdmc}"></span> -->
								<input  title="双击修改名称" th:value="${jdmb.jdmc}"  class="style_1"  th:id="${jdmb.jdid}" readonly="readonly" />						
								<a href="javascript:void(0);" th:onclick="deljd([[${jdmb.jdid}]])"><span class="glyphicon glyphicon-trash" style="float: right;"></span></a>
								<a href="javascript:void(0);" th:onclick="modjdmb([[${jdmb.jdid}]])"><span class="glyphicon glyphicon-cog" style="float: right;margin-right: 5px;"></span></a>
							</div>
							<div class="panel-body" style="height:calc(100% - 35px);">
								<div class="row" style="height:100%;overflow:auto">
									<div class="col-md-12 col-sm-12">
								        <div class="form-group" style="margin:0px;">
											<ul th:jdid="${jdmb.jdid}" class="dragsort">
												<li th:jdid="${jdmb.jdid}"  th:id="${rwmb.rwmbid}" th:each="rwmb:${jdmb.rwmbmc}" style="dispaly:block;border:1px solid #DDDDDD;margin-bottom: 10px;border-radius:2px;">
													<button type ="button" class="btn btn-default btn-block" style="border:0;height:100% !important;" th:onclick="modtemplate([[${rwmb.rwmbid}]])" >
														<div class="row">
															<div class="col-md-12" >
																<div class="row" style="padding-bottom: 10px;">
																	<div class="col-md-1">
																		<span title="标签" class="glyphicon glyphicon-tag" style="color:#A6A6A6;"></span>
																	</div>
																	<div class="col-md-3" >
																		<span th:text="${rwmb.rwbqmc}" style="float: left;" ></span>
																	</div>
																	<div   style="z-index:999;">
																		<div class="col-md-1 col-md-offset-5"   th:onclick="showoperation([[${rwmb.rwmbid}]], event)" >
																			<span title="更多" class="glyphicon glyphicon-option-horizontal" style="color:#A6A6A6;float:right;"></span>
																		</div>
																		<div class="col-md-2">
																			<div th:id="${rwmb.rwmbid}+'menu'"  style="display:none;border:1px solid #FFFFFF;width:180%;margin-left:145%;margin-top:25%;position: absolute;background-color:#DDDDDD;z-index:999;">
																				<table style="width:100%;border:1px solid #FFFFFF;" id="mytable" >
																					<tr>
																						<td  style="width:33.3%;line-height: 30px;text-align: center;border:1px solid #FFFFFF;"  th:onclick="delrwmb([[${rwmb.rwmbid}]], event)">删除</td>
																					</tr>
																				</table>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row" style="padding-bottom: 15px;">
																	<div class="col-md-1">
																		<span title="任务名称" class="glyphicon glyphicon-folder-open" style="color:#A6A6A6;"></span>
																	</div>
																	<div class="col-md-3" >
																		<span th:text="${rwmb.rwmc}" style="float: left;" ></span>
																	</div>
																	<div class="col-md-3 col-md-offset-3">
																		<span th:text="${rwmb.zrwcount}" style="font-size:8px; float: right;"></span>
																	</div>
																</div>
																<div class="row" style="padding-bottom: 10px;">
																	<div class="col-md-1" >
																		<span title="负责人" class="glyphicon glyphicon-user" style="color:#A6A6A6;"></span>
																	</div>
																	<div class="col-md-3" >
																		<span th:text="${rwmb.fzrmc}" style="float:left;" ></span>
																	</div>
																	<div class="col-md-3 col-md-offset-4" >
																		<span th:text="${rwmb.qx}"></span>
																		<span style="float: right">天</span>
																	</div>
																</div>
															</div>
														</div>
													</button>
												</li>
												
											</ul>
								        </div>
									</div>
									<div class="col-md-12 col-sm-12" style="text-align:center;">
										<div class="panel panel-default">
											<div class="panel-body" style="padding:0px;">
												<div class="row">
												<input type="hidden" name="jdid" th:value="${jdmb.jdid}"></span>
													<div id="btn_addTask" style="height:120px;text-align:center;" class="col-md-12 col-sm-12">
											        	<button type ="button" class="btn btn-default btn-block" style="border:0;height:100% !important;" th:onclick="addTaskAlert([[${jdmb.jdid}]]);">
											        		<span class="glyphicon glyphicon-plus"></span>
											        		<span>新建任务</span>
											        	</button>
											        </div>
											        <div id="newTask" style="text-align:center;display:none;" class="col-md-12 col-sm-12">
										        		<div class="col-md-12 col-sm-12">
										        			<input type="text" style="margin-bottom:10px;" placeholder="请输入任务名称" class="form-control"/>
										        		</div>
										        		<div class="col-md-6 col-sm-12">
										        			<button class="btn btn-primary" style="width:100%;">保存</button>
										        		</div>
										        		<div class="col-md-6 col-sm-12">
										        			<button class="btn btn-danger" style="width:100%;" onclick="cancleTask();">取消</button>
										        		</div>
											        </div>
													<div class="clearfix"></div>
												</div>
											</div>
										</div>
							        </div>
									<div class="clearfix"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-xs-12">
					<div class="panel panel-default">
						<div class="panel-body" style="padding:0px;">
							<div class="row">
								<div id="btn_addStage" style="height:120px;text-align:center;" class="col-md-12 col-sm-12">
									<button type="button" class="btn btn-default btn-block" style="border:0;height:100% !important;" onclick="addStage();">
						        		<span class="glyphicon glyphicon-plus"></span>
						        		<span>新建项目阶段</span>
						        	</button>
						        </div>
						        <div id="newStage" style="text-align:center;display:none;" class="col-md-12 col-sm-12">
					        		<div class="col-md-12 col-sm-12">
					        			<input type="text" id="jdmc" name="jdmc" style="margin-bottom:10px;" placeholder="请输入阶段名称" class="form-control"/>
					        		</div>
					        		<div class="col-md-6 col-sm-12">
					        			<button type="button" class="btn btn-primary" style="width:100%;" onclick="saveStage()">保存</button>
					        		</div>
					        		<div class="col-md-6 col-sm-12">
					        			<button  type="button" class="btn btn-danger" style="width:100%;" onclick="cancleStage();">取消</button>
					        		</div>
						        </div>
								<div class="clearfix"></div>
							</div>
						</div>
					</div>
				</div>
				</div>
			</div>
		</form>
	</div>
</body>
</html>
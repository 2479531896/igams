<!DOCTYPE html>
<html>
<head lang="zh-cn">
	<link rel="stylesheet" type="text/css" href="/js/systemmain/task/bootstrap-tagsinput.css" />
	<link rel="stylesheet" type="text/css" href="/css/base.css"/>
	<script type="text/javascript" src="/js/systemmain/task/bootstrap-tagsinput.js" charset="utf-8"></script>
	<script type="text/javascript" src="/js/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="/js/experiment/research/project_researchadd.js"></script>
	
	<style type="text/css">
	#jdrqDiv{
		padding-top:10px;
	}
	</style>
</head>
<body>
<ul class="nav nav-tabs" role="tablist">
	<li class=" nav-item">
		<a href="#jbxx" role="tab" data-bs-toggle="tab" class="nav-link active">基本信息</a>
	</li>
	<li class=" nav-item">
		<a href="#xzxmcy" role="tab" data-bs-toggle="tab" class="nav-link">项目成员</a>
	</li>
	<li class=" nav-item" th:if="${xmjdrwDto.formAction=='modSaveProjectResearch'}">
		<a href="#zrwmod" role="tab" data-bs-toggle="tab" class="nav-link">子任务信息</a>
	</li>
</ul>
<form id="ajaxForm"  th:action="'/experiment/research/'+${xmjdrwDto.formAction}" class="form-horizontal sl_all_form"  method="post" theme="simple" data-bs-toggle="validation">
	<input type="hidden" name="access_token"/>
	<input type="hidden" id="addormod" name="addormod" th:value="${xmjdrwDto.formAction}">
	<input type="hidden" name="mryhid" id="mryhid" th:if="${xmjdrwDto.formAction=='addSaveProjectResearch'}" th:value="${xmcyDto.yhid}">
	<input type="hidden" name="listmap" id="listmap" th:if="${xmjdrwDto.formAction=='modSaveProjectResearch'}" th:value="${xmcyDto}">
	<input type="hidden" name="mrzsxm" id="mrzsxm" th:if="${xmjdrwDto.formAction=='addSaveProjectResearch'}" th:value="${xmcyDto.zsxm}">
	<input type="hidden" id="selmemebers" name="selmemebers" th:value="${selmemebers}"/>
	<input type="hidden" id="unselmemebers" name="unselmemebers" th:value="${unselmemebers}"/>
	<input type="hidden" id="list" name="list" th:value="${xmglDtos}"/>
	<input type="hidden" id="yhids" name="yhids"/>
	<input type="hidden" id="xmid" name="xmid" th:value="${xmjdrwDto.xmid}">
	<input type="hidden" id="rwid" name="rwid" th:value="${xmjdrwDto.rwid}">
	<input type="hidden" id="jdlist" name="jdlist">
	<div class="body-content tab-content">
		<div role="tabpanel" class="tab-pane fade active in" id="jbxx" aria-labelledby="profile-tab">
			<div class="row">
				<input type="hidden" name="access_token"/>
				<div class="col-md-12 col-sm-12">
					<div class="form-group">
						<label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>项目名称</label>
						<div class="col-sm-8 col-md-8 col-xs-12">
							<input type="text" id="xmmc" name="xmmc" th:value="${xmjdrwDto.xmmc}"  validate="{required:true,stringMaxLength:64}" class="form-control" style="height:30px;"/>
						</div>
					</div>
				</div>
				<div class="col-md-12 col-sm-12" th:if="${xmjdrwDto.formAction=='addSaveProjectResearch'}">
					<div class="form-group">
						<label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>选择模板</label>
						<div class="col-sm-8 col-md-8 col-xs-12">
							<select  id="mbid" name="mbid" validate="{required:true}"  class="form-control chosen-select" style="height:34px;" >
								<option value="">--请选择--</option>
								<option th:if="${xmglDtos!=null && xmglDtos.size()>0}" th:each="xmglDto:${xmglDtos}" th:value="${xmglDto.mbid}" th:text="${xmglDto.mbmc}" th:selected="${xmjdrwDto.mbid eq xmglDto.mbid}"></option>
							</select>
						</div>
					</div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>任务名称</label>      	
			          	<div class="col-sm-8">
			          		<input type="text" id="rwmc" name="rwmc" th:value="${xmjdrwDto.rwmc}" data-clear="true"
												validate="{required:true,stringMaxLength:128}" class="form-control" />
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>负&nbsp;&nbsp;责&nbsp;&nbsp;人</label>      	
			          	<div class="col-sm-8">
			          		<select  id="fzr" name="fzr" validate="{required:true}"   class="form-control chosen-select" style="height:34px;">
								<option th:value="${xmjdrwDto.fzr}" th:text="${xmjdrwDto.fzrmc}" th:selected="${xmjdrwDto.fzrmc}"></option>
							</select>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>开始日期</label>      	
			          	<div class="col-sm-8">
			          		<input type="text" id="ksrq" name="ksrq" th:value="${xmjdrwDto.ksrq}" data-clear="true" validate="{required:true,stringMaxLength:32}" class="form-control" />
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label"><span style="color:red;">*</span>结束日期</label>      	
			          	<div class="col-sm-8">
			          		<input type="text" id="jsrq" name="jsrq" th:value="${xmjdrwDto.jsrq}" data-clear="true"
												validate="{required:true,stringMaxLength:32}" class="form-control" />
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务级别</label>      	
			          	<div class="col-sm-8">
							<select  id="rwjb" name="rwjb" th:value="${xmjdrwDto.rwjb}"  class="form-control chosen-select"  style="height:34px;">
								<option value="">--请选择--</option>
								<option th:if="${task_rank !=null &&task_rank.size()>0}" th:each="rank:${task_rank}" th:value="${rank.csid}" th:text="${rank.csmc}" th:selected="${xmjdrwDto.rwjb eq rank.csid}"></option>
							</select>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务标签</label>      	
			          	<div class="col-sm-8">
			          		<select  id="rwbq" name="rwbq" th:value="${xmjdrwDto.rwbq}"  class="form-control chosen-select" style="height:34px;">
								<option value="">--请选择--</option>
								<option th:if="${task_label !=null &&task_label.size()>0}" th:each="label:${task_label}" th:value="${label.csid}" th:text="${label.csmc}" th:selected="${xmjdrwDto.rwbq eq label.csid}"></option>
							</select>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label" >工&nbsp;&nbsp;作&nbsp;&nbsp;量</label>      	
			          	<div class="col-sm-4">
			          		<input type="text" id="yjgzl" name="yjgzl" th:value="${xmjdrwDto.yjgzl}" data-clear="true"
												validate="{stringMaxLength:32}" class="form-control" placeholder="预计工作量"/>
			          	</div>
			          	<div class="col-sm-4">
			          		<input type="text" id="sjgzl" name="sjgzl"  th:value="${xmjdrwDto.sjgzl}" data-clear="true"
												validate="{stringMaxLength:32}" class="form-control" placeholder="实际工作量"/>
			          	</div>
			        </div>
				</div>
				<div class="col-md-12 col-sm-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 control-label">任务描述</label>      	
			          	<div class="col-sm-8" style="line-height: 35px;">
			          		<a href="javascript:void(0);" onclick="editrwms()" id="rwms_btn" style="display:inline-block;width:100%;border:1px solid #CCCCCC;border-radius:3px;">
		            			<span  id="rwmsclick" title="点击编辑"   style="display:inline-block;width:100%;color:#000;padding-left:10px;">点击发表任务描述</span>
		            		</a>
		            		<div id="rwmsDiv" style="display:none;">
				          		<textarea  id="rwms" name="rwms" th:value="${xmjdrwDto.rwms}" style="height:100px;" th:text="${xmjdrwDto.rwms}"
													validate="{stringMaxLength:1024}" class="form-control" placeholder="请输入任务描述"></textarea>
								<button class="btn btn-default" type="button" style="margin-left:77%;width:23%;margin-top:10px;" onclick="cancelrwms()">取消</button>
			          		</div>
			          	</div>
			        </div>
				</div> 
			</div>
		</div>
		<div role="tabpanel" class="tab-pane fade" id="xzxmcy" aria-labelledby="profile-tab">
			<div class="col-md-12 col-sm-12 col-xs-12">
			        <div class="form-group">
			            <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">项目成员</label>     	
			          	<div class="col-sm-8 col-md-8 col-xs-8"  >
			          		<input autoComplete="off"  type="text"  class="form-control" id="xmcy" name="xmcy" data-provide="typeahead" data-items="5"/>
			          		<input type="hidden" id="yhid" name="yhid"/>
			          	</div>
			        </div>
			        <div class="form-group">
			            <label for="" class="col-sm-3 col-md-3 col-xs-3 control-label">已选成员</label>     	
			          	<div class="col-sm-8 col-md-8 col-xs-8" >
			          		<input autoComplete="off"  type="text"  class="form-control" id="yxcy" name="yxcy" />
			          	</div>
			        </div>
				</div>
		</div>
		<div role="tabpanel" class="tab-pane fade" id="zrwmod" aria-labelledby="profile-tab">
			<div id="tab">
			<ul class="nav nav-tabs" role="tablist" th:if="${zrwjdlist!=null && zrwjdlist.size()>0}">
				<li  th:each="zrwjdxxlist:${zrwjdlist}" class="ztab nav-item">
					<a class="nav-link" th:href="'#'+${zrwjdxxlist.xmjdid}" role="tab" data-bs-toggle="tab"><span th:text="${zrwjdxxlist.jdmc}"></span></a>
				</li>
			</ul>
			</div>
			<div role="tabpanel" class="col-sm-12 col-md-12 col-xs-12 tab-pane fade ztabnr" th:id="${zrwjdxxlist.xmjdid}" th:each="zrwjdxxlist:${zrwjdlist}" aria-labelledby="profile-tab">
             <div class="col-md-12 col-sm-12">
			        <!-- <div class="form-group">     	
			          	<div class="col-sm-3" style="line-height: 35px;padding-top:10px;">
			          		<a href="javascript:void(0);" onclick="editJdrq()" id="jdrq_btn" style="display:inline-block;width:100%;border:1px solid #55FF99;border-radius:3px;">
		            			<span  id="rwmsclick" title="点击编辑"   style="display:inline-block;width:100%;color:#33FF85;padding-left:10px;background-color:#DDFFEB;text-align:center;">点击修改阶段日期</span>
		            		</a>
			          	</div>
			          	<div id="jdrqDiv" style="display:none;">
			          		<div class="panel panel-default">
			          		<div class="panel-body">
				          		<div class="col-md-6 col-sm-6">
							        <div class="form-group">
							            <label for="" class="col-sm-4 control-label">计划开始日期</label>      	
							          	<div class="col-sm-8">
							          		<input type="text" id="jhksrq" name="jhksrq"  th:value="${XmjdxxDto != null?XmjdxxDto.jhksrq:''}" data-clear="true" validate="{stringMaxLength:32}" class="form-control" />
							          	</div>
							        </div>
								</div>
								<div class="col-md-6 col-sm-6">
							        <div class="form-group">
							            <label for="" class="col-sm-4 control-label">计划结束日期</label>      	
							          	<div class="col-sm-8">
							          		<input type="text" id="jhjsrq" name="jhjsrq" th:value="${XmjdxxDto != null?XmjdxxDto.jhjsrq:''}" data-clear="true" validate="{stringMaxLength:32}" class="form-control" /> 
							          	</div>
							        </div>
								</div>
								<button class="btn btn-default" type="button" style="margin-left:75%;width:23%;margin-top:10px;" onclick="cancelJdrq()">取消</button>
								</div>
								</div>
			          		</div>
			        </div> -->
			        <div class="col-md-4 col-sm-4 col-xs-4" th:if="${zrwxxs.xmjdid eq zrwjdxxlist.xmjdid}" th:each="zrwxxs:${zrwxxlist}" style="padding:5px;">
                    <button type ="button" class="btn btn-default btn-block" style="height:100% ! important;" th:onclick="modSubTask([[${zrwxxs.rwid}]],[[${zrwxxs.xmjdid}]],[[${zrwxxs.xmid}]],this)" >
                         <div  class="row" style="padding-top:5px;" >
                            <div class="col-md-1 col-sm-1 col-xs-1">
                                <span title="任务名称" class="glyphicon glyphicon-folder-open" style="color:#A6A6A6;"></span>
                            </div>
                            <div class="col-md-8  col-sm-8 col-xs-8 text-left" style="padding-right:0px;">
                                <span th:title="${zrwxxs.rwmc}" th:text="${zrwxxs.rwmc}" style="width:100%;float: left;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;" ></span>
                            </div>
                        </div>
                        <div  class="row" style="padding-top:5px;padding-bottom:5px;" >
                            <div class="col-md-1 col-sm-1 col-xs-1" >
                                <span title="负责人" class="glyphicon glyphicon-user" style="color:#A6A6A6;"></span>
                            </div>
                            <div class="col-md-5 col-sm-5 col-xs-5" >
                                <span th:text="${zrwxxs.fzrmc}" style="float:left;" ></span>
                            </div>
                            <div class="col-md-5 col-sm-5 col-xs-5" style="padding-right:0px;">
                                <span th:text="${zrwxxs.jsrq}" style="float: right;" ></span>
                            </div>
                        </div> 
                    </button>
                	</div> 
				</div>   
			</div>
		</div>
	</div>
</form> 
</body>
</html>
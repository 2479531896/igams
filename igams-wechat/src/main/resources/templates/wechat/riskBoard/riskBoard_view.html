<!DOCTYPE html>
<html lang="zh-cn">
<style type="text/css">

</style>
<body>
<form id="ajaxForm"action="/" data-bs-toggle="validation" method="post"  class="form-horizontal sl_all_form">
    <input type="hidden" name="access_token" />
    <input type="hidden" name="syglid" id="syglid" th:value="${dto.syglid}"/>
    <input type="hidden" name="fxsjid" id="fxsjid" th:value="${dto.fxsjid}"/>
    <div class="body-content" id="confirm">
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                标本编号:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.ybbh}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                内部编码:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.nbbm}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                患者姓名:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.hzxm}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                样本类型:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.yblxmc}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                               风险类别:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.fxlbmc}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                标本处理:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.bbclmc}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                通知日期:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.tzrq}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6" style="height: 34px">
                        <div class="form-group">
                            <label for="" class="col-sm-4 col-xs-12 control-label " >
                                确认时间:
                            </label>
                            <div class="col-sm-8 col-xs-12">
                                <div style="padding-top:6px" th:text="${dto.qrsj}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-12  col-md-12  col-lg-12">
                        <div class="form-group">
                            <div id="fjcfbDto" th:if="${fjcfbDtos != null && fjcfbDtos.size() >0}" th:each="fjcfbDto:${fjcfbDtos}">
                                <div th:id="${fjcfbDto.fjid}" >
                                    <label for="" class="col-sm-2 col-xs-12 control-label" th:if="${fjcfbDtoStat.index == 0}">附&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;件:</label>
                                    <label for="" class="col-sm-2 col-xs-12 control-label" th:if="${fjcfbDtoStat.index > 0}"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        <label for="" th:text="${fjcfbDtoStat.index+1}+."></label>
                                        <button style="outline:none;margin-bottom:5px;padding:0px;" class="btn btn-link" type="button" title="下载" th:onclick="xz([[${fjcfbDto.fjid}]]);" >
                                            <span th:text="${fjcfbDto.wjm}"></span>
                                            <span class="glyphicon glyphicon glyphicon-save"></span>
                                        </button>&nbsp;&nbsp;
                                        <button title="删除" class="f_button" type="button">
                                            <span class="glyphicon glyphicon-remove" th:onclick="del([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjlj}]]);"></span>
                                        </button>&nbsp;&nbsp;
                                        <button title="预览" class="f_button" type="button">
                                            <span  class="glyphicon glyphicon-eye-open" th:onclick="view([[${fjcfbDto.fjid}]],[[${fjcfbDto.wjm}]]);"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="form-group" >
                            <label for="" class="col-sm-2 col-xs-12 control-label">
                                备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注:
                            </label>
                            <div class="col-sm-10 col-xs-12">
                                <textarea id="bz" name="bz" th:text="${dto.bz}" style="outline:none; border:0;width:100%;height:24px;" readonly="bz"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</form>
<script type="text/javascript">

    function xz(fjid){
        jQuery('<form action="/common/file/downloadFile" method="POST">' +  // action请求路径及推送方法
            '<input type="text" name="fjid" value="'+fjid+'"/>' +
            '<input type="text" name="access_token" value="'+$("#ac_tk").val()+'"/>' +
            '</form>')
            .appendTo('body').submit().remove();
    }

    function del(fjid,wjlj){
        $.confirm('您确定要删除所选择的记录吗？',function(result){
            if(result){
                jQuery.ajaxSetup({async:false});
                var url= "/experimentS/experimentS/pagedataRemoveFj";
                jQuery.post(url,{fjid:fjid,wjlj:wjlj,"access_token":$("#ac_tk").val()},function(responseText){
                    setTimeout(function(){
                        if(responseText["status"]){
                            $.success("操作成功！",function() {
                                $("#"+fjid).remove();
                            });
                        }else if(responseText["status"]){
                            $.error("操作失败！",function() {
                            });
                        } else{
                            $.alert("系统异常",function() {
                            });
                        }
                    },1);
                },'json');
                jQuery.ajaxSetup({async:true});
            }
        });
    }

    function view(fjid,wjm){
        var begin=wjm.lastIndexOf(".");
        var end=wjm.length;
        var type=wjm.substring(begin,end);
        if(type.toLowerCase()==".jpg" || type.toLowerCase()==".jpeg" || type.toLowerCase()==".jfif" || type.toLowerCase()==".png"){
            var url="/ws/sjxxpripreview/?fjid="+fjid
            $.showDialog(url,'图片预览',viewPreViewConfig);
        }else if(type.toLowerCase()==".pdf"){
            var url= "/common/file/pdfPreview?fjid=" + fjid;
            $.showDialog(url,'文件预览',viewPreViewConfig);
        }else {
            $.alert("暂不支持其他文件的预览，敬请期待！");
        }
    }


</script>
</body>
</html>